# =========================================
# Oracle Core v1.0 + VOX POPULI v1.1
# Environment Variables (Example)
# =========================================

# --- General Oracle Settings ---
ORACLE_SOURCE_MODE=mock
# Options: mock, shadow, mixed, live
# Use mock for development, shadow for staging (72h validation)

ORACLE_MIXED_RATIO=0.1
# Canary weight for mixed mode (0.0-1.0)
# Start at 0.1, increase to 0.5, then 1.0

ORACLE_PRETTY_PATH_REWRITE=true
# Enable /feeds/id/* → /feeds/by-id/* rewrite (default: true)

# --- VOX POPULI Settings ---

# Alerting
VOX_ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# Slack or Discord webhook for ALR-VOX-* alerts

# Provider Budget Guard
VOX_PROVIDER_BUDGET_PER_MIN=200
# Max API calls per provider per minute (Santiment, LunarCrush, TheTie)

# Signal Thresholds
VOX_SHOCK_THRESHOLD=2.5
# Z-score threshold for ALR-VOX-001 (shock alert)

VOX_DIVERGENCE_THRESHOLD=0.3
# Normalized divergence (HP filter) threshold for ALR-VOX-002

VOX_BRIGADING_THRESHOLD=75
# Brigading score (0-100) threshold for ALR-VOX-003

# Data Quality
VOX_CUSUM_K=0.5
# CUSUM allowance parameter (shift detection sensitivity)

VOX_CUSUM_H=5.0
# CUSUM threshold for quarantine trigger

VOX_COOLDOWN_WINDOW_SEC=600
# Cooldown window for repeated DQ violations (10 minutes)

VOX_QUARANTINE_DURATION_SEC=3600
# Quarantine duration for DQ-failed feeds (1 hour)

# --- Backtest Settings ---
VOX_BACKTEST_WINDOW_DAYS=30
# Rolling window for IC/AUC computation

VOX_BACKTEST_OUTPUT_PATH=/tmp/vox_backtest.json
# Output path for backtest results (served by readonly API)

# --- Entity Resolver ---
VOX_ENTITY_TAXONOMY_PATH=./services/oracle-core/digest/vox/entities.map.json
# Path to entity taxonomy mapping

# --- Redis & Metrics ---
REDIS_URL=redis://localhost:6379
# Redis connection for signal cache and DQ state

PROMETHEUS_PORT=9090
# Prometheus metrics endpoint (for oracle_vox_* metrics)

# --- Security & Compliance ---
ORACLE_API_KEY_CHAINLINK=your_chainlink_api_key
ORACLE_API_KEY_PYTH=your_pyth_api_key
ORACLE_API_KEY_REDSTONE=your_redstone_api_key
ORACLE_API_KEY_BAND=your_band_api_key
ORACLE_API_KEY_CHRONICLE=your_chronicle_api_key

VOX_API_KEY_SANTIMENT=your_santiment_api_key
VOX_API_KEY_LUNARCRUSH=your_lunarcrush_api_key
VOX_API_KEY_THETIE=your_thetie_api_key

# ⚠️ NEVER commit these keys to git! Use .env.local or secret manager.

# --- Logging & Tracing ---
LOG_LEVEL=info
# Options: debug, info, warn, error

CORRELATION_ID_HEADER=x-correlation-id
# Header name for distributed tracing

# --- Retention Policies ---
ORACLE_RAW_RETENTION_DAYS=90
# S3/MinIO retention for raw on-chain data

ORACLE_SIGNAL_RETENTION_DAYS=400
# TSDB retention for processed signals

ORACLE_JSONB_RETENTION_DAYS=180
# PostgreSQL JSONB retention for audit logs

# =========================================
# Notes:
# - Copy this file to .env.local for local dev
# - Use secret manager (AWS Secrets, GCP Secret Manager) for production
# - Rotate API keys quarterly (SOX compliance)
# - Monitor budget guards to avoid cost overruns
# =========================================

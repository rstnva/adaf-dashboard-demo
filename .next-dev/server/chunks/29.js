exports.id=29,exports.ids=[29],exports.modules={2031:(a,b,c)=>{"use strict";let{isObject:d}=c(67733),e=c(40778),f=c(23493),g=c(47904),h=c(93952),i=c(69328),j=c(71949),k=c(10999),l=c(97612),m=c(82953),n=c(71390),o=c(73651),p=c(25707),q=c(68737),r={processCpuTotal:e,processStartTime:f,osMemoryHeap:g,processOpenFileDescriptors:h,processMaxFileDescriptors:i,eventLoopLag:j,..."function"==typeof process.getActiveResourcesInfo?{processResources:m}:{},processHandles:k,processRequests:l,heapSizeAndUsed:n,heapSpacesSizeAndUsed:o,version:p,gc:q},s=Object.keys(r);a.exports=function(a){if(null!=a&&!d(a))throw TypeError("config must be null, undefined, or an object");for(let b of(a={eventLoopMonitoringPrecision:10,...a},Object.values(r)))b(a.register,a)},a.exports.metricsList=s},2058:(a,b,c)=>{a.exports={RBTree:c(31468),BinTree:c(67971)}},6008:(a,b,c)=>{var d=c(2058).RBTree;function e(a,b,c){this.discrete=!1===a,this.delta=a||.01,this.K=void 0===b?25:b,this.CX=void 0===c?1.1:c,this.centroids=new d(f),this.nreset=0,this.reset()}function f(a,b){return a.mean>b.mean?1:a.mean<b.mean?-1:0}function g(a,b){return a.mean_cumn-b.mean_cumn}function h(a){this.config=a||{},this.mode=this.config.mode||"auto",e.call(this,"cont"===this.mode&&a.delta),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}e.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0},e.prototype.size=function(){return this.centroids.size},e.prototype.toArray=function(a){var b=[];return a?(this._cumulate(!0),this.centroids.each(function(a){b.push(a)})):this.centroids.each(function(a){b.push({mean:a.mean,n:a.n})}),b},e.prototype.summary=function(){return[(this.discrete?"exact ":"approximating ")+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)].join("\n")},e.prototype.push=function(a,b){b=b||1,a=Array.isArray(a)?a:[a];for(var c=0;c<a.length;c++)this._digest(a[c],b)},e.prototype.push_centroid=function(a){a=Array.isArray(a)?a:[a];for(var b=0;b<a.length;b++)this._digest(a[b].mean,a[b].n)},e.prototype._cumulate=function(a){if(this.n!==this.last_cumulate&&(a||!this.CX||!(this.CX>this.n/this.last_cumulate))){var b=0;this.centroids.each(function(a){a.mean_cumn=b+a.n/2,b=a.cumn=b+a.n}),this.n=this.last_cumulate=b}},e.prototype.find_nearest=function(a){if(0===this.size())return null;var b=this.centroids.lowerBound({mean:a}),c=null===b.data()?b.prev():b.data();if(c.mean===a||this.discrete)return c;var d=b.prev();return d&&Math.abs(d.mean-a)<Math.abs(c.mean-a)?d:c},e.prototype._new_centroid=function(a,b,c){var d={mean:a,n:b,cumn:c};return this.centroids.insert(d),this.n+=b,d},e.prototype._addweight=function(a,b,c){b!==a.mean&&(a.mean+=c*(b-a.mean)/(a.n+c)),a.cumn+=c,a.mean_cumn+=c/2,a.n+=c,this.n+=c},e.prototype._digest=function(a,b){var c=this.centroids.min(),d=this.centroids.max(),e=this.find_nearest(a);if(e&&e.mean===a)this._addweight(e,a,b);else if(e===c)this._new_centroid(a,b,0);else if(e===d)this._new_centroid(a,b,this.n);else if(this.discrete)this._new_centroid(a,b,e.cumn);else{var f=e.mean_cumn/this.n;Math.floor(4*this.n*this.delta*f*(1-f))-e.n>=b?this._addweight(e,a,b):this._new_centroid(a,b,e.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()},e.prototype.bound_mean=function(a){var b=this.centroids.upperBound({mean:a}),c=b.prev(),d=c.mean===a?c:b.next();return[c,d]},e.prototype.p_rank=function(a){var b=(Array.isArray(a)?a:[a]).map(this._p_rank,this);return Array.isArray(a)?b:b[0]},e.prototype._p_rank=function(a){if(0!==this.size()){if(a<this.centroids.min().mean)return 0;if(a>this.centroids.max().mean)return 1;this._cumulate(!0);var b=this.bound_mean(a),c=b[0],d=b[1];if(this.discrete)return c.cumn/this.n;var e=c.mean_cumn;return c!==d&&(e+=(a-c.mean)*(d.mean_cumn-c.mean_cumn)/(d.mean-c.mean)),e/this.n}},e.prototype.bound_mean_cumn=function(a){this.centroids._comparator=g;var b=this.centroids.upperBound({mean_cumn:a});this.centroids._comparator=f;var c=b.prev(),d=c&&c.mean_cumn===a?c:b.next();return[c,d]},e.prototype.percentile=function(a){var b=(Array.isArray(a)?a:[a]).map(this._percentile,this);return Array.isArray(a)?b:b[0]},e.prototype._percentile=function(a){if(0!==this.size()){this._cumulate(!0);var b=this.n*a,c=this.bound_mean_cumn(b),d=c[0],e=c[1];return e===d||null===d||null===e?(d||e).mean:this.discrete?b<=d.cumn?d.mean:e.mean:d.mean+(b-d.mean_cumn)*(e.mean-d.mean)/(e.mean_cumn-d.mean_cumn)}},e.prototype.compress=function(){if(!this.compressing){var a=this.toArray();for(this.reset(),this.compressing=!0;a.length>0;)this.push_centroid(function(a){var b=Math.floor(Math.random()*a.length);return a.splice(b,1)[0]}(a));this._cumulate(!0),this.compressing=!1}},h.prototype=Object.create(e.prototype),h.prototype.constructor=h,h.prototype.push=function(a){e.prototype.push.call(this,a),this.check_continuous()},h.prototype._new_centroid=function(a,b,c){this.n_unique+=1,e.prototype._new_centroid.call(this,a,b,c)},h.prototype._addweight=function(a,b,c){1===a.n&&(this.n_unique-=1),e.prototype._addweight.call(this,a,b,c)},h.prototype.check_continuous=function(){return!("auto"!==this.mode||this.size()<this.digest_thresh)&&this.n_unique/this.size()>this.digest_ratio&&(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0)},a.exports={TDigest:e,Digest:h}},10999:(a,b,c)=>{"use strict";let{aggregateByObjectName:d}=c(39714),{updateMetrics:e}=c(39714),f=c(80058),g="nodejs_active_handles",h="nodejs_active_handles_total";a.exports=(a,b={})=>{if("function"!=typeof process._getActiveHandles)return;let c=a?[a]:void 0,i=b.prefix?b.prefix:"",j=b.labels?b.labels:{},k=Object.keys(j);new f({name:i+g,help:"Number of active libuv handles grouped by handle type. Every handle type is C++ class name.",labelNames:["type",...k],registers:c,collect(){e(this,d(process._getActiveHandles()),j)}}),new f({name:i+h,help:"Total number of active handles.",registers:c,labelNames:k,collect(){let a=process._getActiveHandles();this.set(j,a.length)}})},a.exports.metricNames=[g,h]},13051:(a,b,c)=>{"use strict";let{Grouper:d,hashObject:e}=c(67733);function f(a){return b=>{if(0===b.length)return;let c={help:b[0].help,name:b[0].name,type:b[0].type,values:[],aggregator:b[0].aggregator},f=new d;return b.forEach(a=>{a.values.forEach(a=>{let b=e(a.labels);f.add(`${a.metricName}_${b}`,a)})}),f.forEach(b=>{if(0===b.length)return;let d={value:a(b),labels:b[0].labels};b[0].metricName&&(d.metricName=b[0].metricName),c.values.push(d)}),c}}b.AggregatorFactory=f,b.aggregators={sum:f(a=>a.reduce((a,b)=>a+b.value,0)),first:f(a=>a[0].value),omit:()=>{},average:f(a=>a.reduce((a,b)=>a+b.value,0)/a.length),min:f(a=>a.reduce((a,b)=>Math.min(a,b.value),1/0)),max:f(a=>a.reduce((a,b)=>Math.max(a,b.value),-1/0))}},22161:(a,b,c)=>{"use strict";let d=c(28354),{hashObject:e,isObject:f,getLabels:g,removeLabels:h,nowTimestamp:i}=c(67733),{validateLabel:j}=c(46522),{Metric:k}=c(96085),l=c(53265);class m extends k{constructor(a){super(a),this.type="counter",this.defaultLabels={},this.defaultValue=1,this.defaultExemplarLabelSet={},a.enableExemplars?(this.enableExemplars=!0,this.inc=this.incWithExemplar):this.inc=this.incWithoutExemplar}incWithoutExemplar(a,b){let c="";if(f(a)?(c=e(a,this.sortedLabelNames),j(this.labelNames,a)):(b=a,a={}),b&&!Number.isFinite(b))throw TypeError(`Value is not a valid number: ${d.format(b)}`);if(b<0)throw Error("It is not possible to decrease a counter");return null==b&&(b=1),n(this.hashMap,b,a,c),{labelHash:c}}incWithExemplar({labels:a=this.defaultLabels,value:b=this.defaultValue,exemplarLabels:c=this.defaultExemplarLabelSet}={}){let d=this.incWithoutExemplar(a,b);this.updateExemplar(c,b,d.labelHash)}updateExemplar(a,b,c){a!==this.defaultExemplarLabelSet&&(f(this.hashMap[c].exemplar)||(this.hashMap[c].exemplar=new l),this.hashMap[c].exemplar.validateExemplarLabelSet(a),this.hashMap[c].exemplar.labelSet=a,this.hashMap[c].exemplar.value=b||1,this.hashMap[c].exemplar.timestamp=i())}reset(){this.hashMap={},0===this.labelNames.length&&n(this.hashMap,0)}async get(){if(this.collect){let a=this.collect();a instanceof Promise&&await a}return{help:this.help,name:this.name,type:this.type,values:Object.values(this.hashMap),aggregator:this.aggregator}}labels(...a){let b=g(this.labelNames,a)||{};return{inc:this.inc.bind(this,b)}}remove(...a){let b=g(this.labelNames,a)||{};return j(this.labelNames,b),h.call(this,this.hashMap,b,this.sortedLabelNames)}}function n(a,b,c={},d=""){return a[d]?a[d].value+=b:a[d]={value:b,labels:c},a}a.exports=m},23493:(a,b,c)=>{"use strict";let d=c(80058),e=Math.round(Date.now()/1e3-process.uptime()),f="process_start_time_seconds";a.exports=(a,b={})=>{let c=b.prefix?b.prefix:"",g=b.labels?b.labels:{};new d({name:c+f,help:"Start time of the process since unix epoch in seconds.",registers:a?[a]:void 0,labelNames:Object.keys(g),aggregator:"omit",collect(){this.set(g,e)}})},a.exports.metricNames=[f]},25707:(a,b,c)=>{"use strict";let d=c(80058),e=process.version,f=e.slice(1).split(".").map(Number),g="nodejs_version_info";a.exports=(a,b={})=>{let c=b.prefix?b.prefix:"",h=b.labels?b.labels:{};new d({name:c+g,help:"Node.js version info.",labelNames:["version","major","minor","patch",...Object.keys(h)],registers:a?[a]:void 0,aggregator:"first",collect(){this.labels(e,f[0],f[1],f[2],...Object.values(h)).set(1)}})},a.exports.metricNames=[g]},29122:(a,b,c)=>{"use strict";let{getValueAsString:d}=c(67733);class e{static get PROMETHEUS_CONTENT_TYPE(){return"text/plain; version=0.0.4; charset=utf-8"}static get OPENMETRICS_CONTENT_TYPE(){return"application/openmetrics-text; version=1.0.0; charset=utf-8"}constructor(a=e.PROMETHEUS_CONTENT_TYPE){if(this._metrics={},this._collectors=[],this._defaultLabels={},a!==e.PROMETHEUS_CONTENT_TYPE&&a!==e.OPENMETRICS_CONTENT_TYPE)throw TypeError(`Content type ${a} is unsupported`);this._contentType=a}getMetricsAsArray(){return Object.values(this._metrics)}async getMetricsAsString(a){let b="function"==typeof a.getForPromString?await a.getForPromString():await a.get(),c=h(b.name),i=[`# HELP ${c} ${h(b.help)}`,`# TYPE ${c} ${b.type}`],j=Object.keys(this._defaultLabels).length>0?this._defaultLabels:null,k=this.contentType===e.OPENMETRICS_CONTENT_TYPE;for(let a of b.values||[]){let{metricName:e=c,labels:h={}}=a,{sharedLabels:l={}}=a;k&&"counter"===b.type&&(e=`${e}_total`),j&&(h={...h,...j,...h});let m=[...f(h,l),function(a){let b=g.get(a);if(b)return b;let c=f(a).join(",");return g.set(a,c),c}(l)].filter(Boolean),n=m.length?`{${m.join(",")}}`:"",o=`${e}${n} ${d(a.value)}`,{exemplar:p}=a;if(p&&k){let a=f(p.labelSet);o+=` # {${a.join(",")}} ${d(p.value)} ${p.timestamp}`}i.push(o)}return i.join("\n")}async metrics(){let a=this.contentType===e.OPENMETRICS_CONTENT_TYPE,b=this.getMetricsAsArray().map(b=>(a&&"counter"===b.type&&(b.name=b.name.replace(/_total$/,"")),this.getMetricsAsString(b))),c=await Promise.all(b);return a?`${c.join("\n")}
# EOF
`:`${c.join("\n\n")}
`}registerMetric(a){if(this._metrics[a.name]&&this._metrics[a.name]!==a)throw Error(`A metric with the name ${a.name} has already been registered.`);this._metrics[a.name]=a}clear(){this._metrics={},this._defaultLabels={}}async getMetricsAsJSON(){let a=[],b=Object.keys(this._defaultLabels),c=[];for(let a of this.getMetricsAsArray())c.push(a.get());for(let d of(await Promise.all(c))){if(d.values&&b.length>0)for(let a of d.values)for(let c of(a.labels=Object.assign({},a.labels),b))a.labels[c]=a.labels[c]||this._defaultLabels[c];a.push(d)}return a}removeSingleMetric(a){delete this._metrics[a]}getSingleMetricAsString(a){return this.getMetricsAsString(this._metrics[a])}getSingleMetric(a){return this._metrics[a]}setDefaultLabels(a){this._defaultLabels=a}resetMetrics(){for(let a in this._metrics)this._metrics[a].reset()}get contentType(){return this._contentType}setContentType(a){if(a===e.OPENMETRICS_CONTENT_TYPE||a===e.PROMETHEUS_CONTENT_TYPE)this._contentType=a;else throw Error(`Content type ${a} is unsupported`)}static merge(a){let b=a[0].contentType;for(let c of a)if(c.contentType!==b)throw Error("Registers can only be merged if they have the same content type");let c=new e(b);return a.reduce((a,b)=>a.concat(b.getMetricsAsArray()),[]).forEach(c.registerMetric,c),c}}function f(a,b){let{hasOwnProperty:c}=Object.prototype,d=[];for(let[f,g]of Object.entries(a)){var e;b&&c.call(b,f)||d.push(`${f}="${"string"!=typeof(e=g)?e:h(e).replace(/"/g,'\\"')}"`)}return d}let g=new WeakMap;function h(a){return a.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")}a.exports=e,a.exports.globalRegistry=new e},31468:(a,b,c)=>{var d=c(57797);function e(a){this.data=a,this.left=null,this.right=null,this.red=!0}function f(a){this._root=null,this._comparator=a,this.size=0}function g(a){return null!==a&&a.red}function h(a,b){var c=a.get_child(!b);return a.set_child(!b,c.get_child(b)),c.set_child(b,a),a.red=!0,c.red=!1,c}function i(a,b){return a.set_child(!b,h(a.get_child(!b),!b)),h(a,b)}e.prototype.get_child=function(a){return a?this.right:this.left},e.prototype.set_child=function(a,b){a?this.right=b:this.left=b},f.prototype=new d,f.prototype.insert=function(a){var b=!1;if(null===this._root)this._root=new e(a),b=!0,this.size++;else{var c=new e(void 0),d=0,f=0,j=null,k=c,l=null,m=this._root;for(k.right=this._root;;){if(null===m?(m=new e(a),l.set_child(d,m),b=!0,this.size++):g(m.left)&&g(m.right)&&(m.red=!0,m.left.red=!1,m.right.red=!1),g(m)&&g(l)){var n=k.right===j;m===l.get_child(f)?k.set_child(n,h(j,!f)):k.set_child(n,i(j,!f))}var o=this._comparator(m.data,a);if(0===o)break;f=d,d=o<0,null!==j&&(k=j),j=l,l=m,m=m.get_child(d)}this._root=c.right}return this._root.red=!1,b},f.prototype.remove=function(a){if(null===this._root)return!1;var b=new e(void 0),c=b;c.right=this._root;for(var d=null,f=null,j=null,k=1;null!==c.get_child(k);){var l=k;f=d,d=c,c=c.get_child(k);var m=this._comparator(a,c.data);if(k=m>0,0===m&&(j=c),!g(c)&&!g(c.get_child(k))){if(g(c.get_child(!k))){var n=h(c,k);d.set_child(l,n),d=n}else if(!g(c.get_child(!k))){var o=d.get_child(!l);if(null!==o)if(g(o.get_child(!l))||g(o.get_child(l))){var p=f.right===d;g(o.get_child(l))?f.set_child(p,i(d,l)):g(o.get_child(!l))&&f.set_child(p,h(d,l));var q=f.get_child(p);q.red=!0,c.red=!0,q.left.red=!1,q.right.red=!1}else d.red=!1,o.red=!0,c.red=!0}}}return null!==j&&(j.data=c.data,d.set_child(d.right===c,c.get_child(null===c.left)),this.size--),this._root=b.right,null!==this._root&&(this._root.red=!1),null!==j},a.exports=f},37376:a=>{"use strict";a.exports=function(){try{return process.memoryUsage()}catch{return}}},39714:a=>{"use strict";a.exports={aggregateByObjectName:function(a){let b={};for(let c=0;c<a.length;c++){let d=a[c];d&&void 0!==d.constructor&&(Object.hasOwnProperty.call(b,d.constructor.name)?b[d.constructor.name]+=1:b[d.constructor.name]=1)}return b},updateMetrics:function(a,b,c){for(let d in a.reset(),b)a.set(Object.assign({type:d},c||{}),b[d])}}},40778:(a,b,c)=>{"use strict";let d=c(8713),e=c(22161),f="process_cpu_user_seconds_total",g="process_cpu_system_seconds_total",h="process_cpu_seconds_total";a.exports=(a,b={})=>{let c=a?[a]:void 0,i=b.prefix?b.prefix:"",j=b.labels?b.labels:{},k=!!b.enableExemplars&&b.enableExemplars,l=Object.keys(j),m=process.cpuUsage(),n=new e({name:i+f,help:"Total user CPU time spent in seconds.",enableExemplars:k,registers:c,labelNames:l,collect(){let a=process.cpuUsage(),b=a.user-m.user,c=a.system-m.system;if(m=a,this.enableExemplars){let a={},e=d.trace.getSpan(d.context.active());e&&(a={traceId:e.spanContext().traceId,spanId:e.spanContext().spanId}),n.inc({labels:j,value:b/1e6,exemplarLabels:a}),o.inc({labels:j,value:c/1e6,exemplarLabels:a}),p.inc({labels:j,value:(b+c)/1e6,exemplarLabels:a})}else n.inc(j,b/1e6),o.inc(j,c/1e6),p.inc(j,(b+c)/1e6)}}),o=new e({name:i+g,help:"Total system CPU time spent in seconds.",enableExemplars:k,registers:c,labelNames:l}),p=new e({name:i+h,help:"Total user and system CPU time spent in seconds.",enableExemplars:k,registers:c,labelNames:l})},a.exports.metricNames=[f,g,h]},46522:(a,b,c)=>{"use strict";let d=c(28354),e=/^[a-zA-Z_:][a-zA-Z0-9_:]*$/,f=/^[a-zA-Z_][a-zA-Z0-9_]*$/;b.validateMetricName=function(a){return e.test(a)},b.validateLabelName=function(a=[]){return a.every(a=>f.test(a))},b.validateLabel=function(a,b){for(let c in b)if(!a.includes(c))throw Error(`Added label "${c}" is not included in initial labelset: ${d.inspect(a)}`)}},47904:(a,b,c)=>{"use strict";let d=c(80058),e=c(68576),f=c(37376),g="process_resident_memory_bytes";a.exports=(a,b)=>"linux"===process.platform?e(a,b):function(a,b={}){let c=b.prefix?b.prefix:"",e=b.labels?b.labels:{};new d({name:c+g,help:"Resident memory size in bytes.",registers:a?[a]:void 0,labelNames:Object.keys(e),collect(){let a=f();a&&this.set(e,a.rss)}})}(a,b),a.exports.metricNames="linux"===process.platform?e.metricNames:[g]},50029:(a,b,c)=>{"use strict";b.register=c(29122).globalRegistry,b.Registry=c(29122),Object.defineProperty(b,"contentType",{configurable:!1,enumerable:!0,get:()=>b.register.contentType,set(a){b.register.setContentType(a)}}),b.prometheusContentType=b.Registry.PROMETHEUS_CONTENT_TYPE,b.openMetricsContentType=b.Registry.OPENMETRICS_CONTENT_TYPE,b.validateMetricName=c(46522).validateMetricName,b.Counter=c(22161),b.Gauge=c(80058),b.Histogram=c(53063),b.Summary=c(52525),b.Pushgateway=c(61947),b.linearBuckets=c(76909).linearBuckets,b.exponentialBuckets=c(76909).exponentialBuckets,b.collectDefaultMetrics=c(2031),b.aggregators=c(13051).aggregators,b.AggregatorRegistry=c(51715)},51715:(a,b,c)=>{"use strict";let d=c(29122),{Grouper:e}=c(67733),{aggregators:f}=c(13051),g=()=>{let a=c(27172);return g=()=>a,a},h="prom-client:getMetricsReq",i="prom-client:getMetricsRes",j=[d.globalRegistry],k=0,l=!1,m=new Map;class n extends d{constructor(a=d.PROMETHEUS_CONTENT_TYPE){super(a),!l&&(l=!0,g().isMaster&&g().on("message",(a,b)=>{if(b.type===i){let a=m.get(b.requestId);if(b.error)return void a.done(Error(b.error));if(b.metrics.forEach(b=>a.responses.push(b)),a.pending--,0===a.pending){m.delete(b.requestId),clearTimeout(a.errorTimeout);let c=n.aggregate(a.responses).metrics();a.done(null,c)}}}),g().isWorker&&process.on("message",a=>{a.type===h&&Promise.all(j.map(a=>a.getMetricsAsJSON())).then(b=>{process.send({type:i,requestId:a.requestId,metrics:b})}).catch(b=>{process.send({type:i,requestId:a.requestId,error:b.message})})}))}clusterMetrics(){let a=k++;return new Promise((b,c)=>{let d=!1;function e(a,e){d||(d=!0,a?c(a):b(e))}let f={responses:[],pending:0,done:e,errorTimeout:setTimeout(()=>{let a=Error("Operation timed out.");f.done(a)},5e3)};m.set(a,f);let i={type:h,requestId:a};for(let a in g().workers)g().workers[a].isConnected()&&(g().workers[a].send(i),f.pending++);0===f.pending&&(clearTimeout(f.errorTimeout),process.nextTick(()=>e(null,"")))})}get contentType(){return super.contentType}static aggregate(a,b=d.PROMETHEUS_CONTENT_TYPE){let c=new d,g=new e;return c.setContentType(b),a.forEach(a=>{a.forEach(a=>{g.add(a.name,a)})}),g.forEach(a=>{let b=a[0].aggregator,d=f[b];if("function"!=typeof d)throw Error(`'${b}' is not a defined aggregator.`);let e=d(a);if(e){let a=Object.assign({get:()=>e},e);c.registerMetric(a)}}),c}static setRegistries(a){Array.isArray(a)||(a=[a]),a.forEach(a=>{if(!(a instanceof d))throw TypeError(`Expected Registry, got ${typeof a}`)}),j=a}}a.exports=n},52525:(a,b,c)=>{"use strict";let d=c(28354),{getLabels:e,hashObject:f,removeLabels:g}=c(67733),{validateLabel:h}=c(46522),{Metric:i}=c(96085),j=c(72248);class k extends i{constructor(a){for(let b of(super(a,{percentiles:[.01,.05,.5,.9,.95,.99,.999],compressCount:1e3,hashMap:{}}),this.type="summary",this.labelNames))if("quantile"===b)throw Error("quantile is a reserved label keyword");0===this.labelNames.length&&(this.hashMap={[f({})]:{labels:{},td:new j(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}})}observe(a,b){m.call(this,0===a?0:a||{})(b)}async get(){if(this.collect){let a=this.collect();a instanceof Promise&&await a}let a=Object.keys(this.hashMap),b=[];return a.forEach(a=>{var c,d,e,f,g,h;let i=this.hashMap[a];i&&(this.pruneAgedBuckets&&0===i.td.size()?delete this.hashMap[a]:((c=i,d=this.percentiles,c.td.compress(),d.map(a=>{let b=c.td.percentile(a);return{labels:Object.assign({quantile:a},c.labels),value:b||0}})).forEach(a=>{b.push(a)}),b.push((e=i,f=this,{metricName:`${f.name}_sum`,labels:e.labels,value:e.sum})),b.push((g=i,h=this,{metricName:`${h.name}_count`,labels:g.labels,value:g.count}))))}),{name:this.name,help:this.help,type:this.type,values:b,aggregator:this.aggregator}}reset(){Object.values(this.hashMap).forEach(a=>{a.td.reset(),a.count=0,a.sum=0})}startTimer(a){return l.call(this,a)()}labels(...a){let b=e(this.labelNames,a);return h(this.labelNames,b),{observe:m.call(this,b),startTimer:l.call(this,b)}}remove(...a){let b=e(this.labelNames,a);h(this.labelNames,b),g.call(this,this.hashMap,b,this.sortedLabelNames)}}function l(a){return()=>{let b=process.hrtime();return c=>{let d=process.hrtime(b),e=d[0]+d[1]/1e9;return this.observe(Object.assign({},a,c),e),e}}}function m(a){return b=>{var c,e;let g=(c=a,void 0===(e=b)?{value:c,labels:{}}:{labels:c,value:e});if(h(this.labelNames,a),!Number.isFinite(g.value))throw TypeError(`Value is not a valid number: ${d.format(g.value)}`);let i=f(g.labels,this.sortedLabelNames),k=this.hashMap[i];k||(k={labels:g.labels,td:new j(this.maxAgeSeconds,this.ageBuckets),count:0,sum:0}),k.td.push(g.value),k.count++,k.count%this.compressCount==0&&k.td.compress(),k.sum+=g.value,this.hashMap[i]=k}}a.exports=k},53063:(a,b,c)=>{"use strict";let d=c(28354),{getLabels:e,hashObject:f,isObject:g,removeLabels:h,nowTimestamp:i}=c(67733),{validateLabel:j}=c(46522),{Metric:k}=c(96085),l=c(53265);class m extends k{constructor(a){for(let b of(super(a,{buckets:[.005,.01,.025,.05,.1,.25,.5,1,2.5,5,10]}),this.type="histogram",this.defaultLabels={},this.defaultExemplarLabelSet={},this.enableExemplars=!1,this.labelNames))if("le"===b)throw Error("le is a reserved label keyword");this.upperBounds=this.buckets,this.bucketValues=this.upperBounds.reduce((a,b)=>(a[b]=0,a),{}),a.enableExemplars?(this.enableExemplars=!0,this.bucketExemplars=this.upperBounds.reduce((a,b)=>(a[b]=null,a),{}),Object.freeze(this.bucketExemplars),this.observe=this.observeWithExemplar):this.observe=this.observeWithoutExemplar,Object.freeze(this.bucketValues),Object.freeze(this.upperBounds),0===this.labelNames.length&&(this.hashMap={[f({})]:s({},this.bucketValues,this.bucketExemplars)})}observeWithoutExemplar(a,b){r.call(this,0===a?0:a||{})(b)}observeWithExemplar({labels:a=this.defaultLabels,value:b,exemplarLabels:c=this.defaultExemplarLabelSet}={}){r.call(this,0===a?0:a||{})(b),this.updateExemplar(a,b,c)}updateExemplar(a,b,c){if(0===Object.keys(c).length)return;let d=f(a,this.sortedLabelNames),e=q(this.upperBounds,b),{bucketExemplars:h}=this.hashMap[d],j=h[e];g(j)||(j=new l,h[e]=j),j.validateExemplarLabelSet(c),j.labelSet=c,j.value=b,j.timestamp=i()}async get(){let a=await this.getForPromString();return a.values=a.values.map(t),a}async getForPromString(){var a;if(this.collect){let a=this.collect();a instanceof Promise&&await a}let b=Object.values(this.hashMap).map(function(a){let b=`${a.name}_bucket`;return c=>{let d=0;return{buckets:a.upperBounds.map(a=>(d+=c.bucketValues[a],p({le:a},d,b,c.bucketExemplars?c.bucketExemplars[a]:null,c.labels))),data:c}}}(this)).reduce((a=this,(b,c)=>(b.push(...c.buckets),b.push(p({le:"+Inf"},c.data.count,`${a.name}_bucket`,c.data.bucketExemplars?c.data.bucketExemplars["-1"]:null,c.data.labels),p({},c.data.sum,`${a.name}_sum`,void 0,c.data.labels),p({},c.data.count,`${a.name}_count`,void 0,c.data.labels)),b)),[]);return{name:this.name,help:this.help,type:this.type,values:b,aggregator:this.aggregator}}reset(){this.hashMap={}}zero(a){let b=f(a,this.sortedLabelNames);this.hashMap[b]=s(a,this.bucketValues,this.bucketExemplars)}startTimer(a,b){return this.enableExemplars?o.call(this,a,b)():n.call(this,a)()}labels(...a){let b=e(this.labelNames,a);return j(this.labelNames,b),{observe:r.call(this,b),startTimer:n.call(this,b)}}remove(...a){let b=e(this.labelNames,a);j(this.labelNames,b),h.call(this,this.hashMap,b,this.sortedLabelNames)}}function n(a){return()=>{let b=process.hrtime();return c=>{let d=process.hrtime(b),e=d[0]+d[1]/1e9;return this.observe(Object.assign({},a,c),e),e}}}function o(a,b){return()=>{let c=process.hrtime();return(d,e)=>{let f=process.hrtime(c),g=f[0]+f[1]/1e9;return this.observe({labels:Object.assign({},a,d),value:g,exemplarLabels:Object.assign({},b,e)}),g}}}function p(a,b,c,d,e={}){return{labels:a,sharedLabels:e,value:b,metricName:c,exemplar:d}}function q(a,b){for(let c=0;c<a.length;c++){let d=a[c];if(b<=d)return d}return -1}function r(a){return b=>{var c,e;let h=(c=a,e=b,g(c)?{labels:c,value:e}:{value:c,labels:{}});if(j(this.labelNames,h.labels),!Number.isFinite(h.value))throw TypeError(`Value is not a valid number: ${d.format(h.value)}`);let i=f(h.labels,this.sortedLabelNames),k=this.hashMap[i];k||(k=s(h.labels,this.bucketValues,this.bucketExemplars));let l=q(this.upperBounds,h.value);k.sum+=h.value,k.count+=1,Object.prototype.hasOwnProperty.call(k.bucketValues,l)&&(k.bucketValues[l]+=1),this.hashMap[i]=k}}function s(a,b,c){let d={labels:a,bucketValues:{...b},sum:0,count:0};return c&&(d.bucketExemplars={...c}),d}function t(a){let{sharedLabels:b,labels:c,...d}=a;for(let a of Object.keys(b))c[a]=b[a];return d.labels=c,d}a.exports=m},53265:a=>{"use strict";class b{constructor(a={},b=null){this.labelSet=a,this.value=b}validateExemplarLabelSet(a){let b="";for(let[c,d]of Object.entries(a))b+=`${c}${d}`;if(b.length>128)throw RangeError("Label set size must be smaller than 128 UTF-8 chars")}}a.exports=b},57797:a=>{function b(){}function c(a){this._tree=a,this._ancestors=[],this._cursor=null}b.prototype.clear=function(){this._root=null,this.size=0},b.prototype.find=function(a){for(var b=this._root;null!==b;){var c=this._comparator(a,b.data);if(0===c)return b.data;b=b.get_child(c>0)}return null},b.prototype.findIter=function(a){for(var b=this._root,c=this.iterator();null!==b;){var d=this._comparator(a,b.data);if(0===d)return c._cursor=b,c;c._ancestors.push(b),b=b.get_child(d>0)}return null},b.prototype.lowerBound=function(a){for(var b=this._root,c=this.iterator(),d=this._comparator;null!==b;){var e=d(a,b.data);if(0===e)return c._cursor=b,c;c._ancestors.push(b),b=b.get_child(e>0)}for(var f=c._ancestors.length-1;f>=0;--f)if(0>d(a,(b=c._ancestors[f]).data))return c._cursor=b,c._ancestors.length=f,c;return c._ancestors.length=0,c},b.prototype.upperBound=function(a){for(var b=this.lowerBound(a),c=this._comparator;null!==b.data()&&0===c(b.data(),a);)b.next();return b},b.prototype.min=function(){var a=this._root;if(null===a)return null;for(;null!==a.left;)a=a.left;return a.data},b.prototype.max=function(){var a=this._root;if(null===a)return null;for(;null!==a.right;)a=a.right;return a.data},b.prototype.iterator=function(){return new c(this)},b.prototype.each=function(a){for(var b,c=this.iterator();null!==(b=c.next());)if(!1===a(b))return},b.prototype.reach=function(a){for(var b,c=this.iterator();null!==(b=c.prev());)if(!1===a(b))return},c.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},c.prototype.next=function(){if(null===this._cursor){var a,b=this._tree._root;null!==b&&this._minNode(b)}else if(null===this._cursor.right)do if(a=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===a);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},c.prototype.prev=function(){if(null===this._cursor){var a,b=this._tree._root;null!==b&&this._maxNode(b)}else if(null===this._cursor.left)do if(a=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===a);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},c.prototype._minNode=function(a){for(;null!==a.left;)this._ancestors.push(a),a=a.left;this._cursor=a},c.prototype._maxNode=function(a){for(;null!==a.right;)this._ancestors.push(a),a=a.right;this._cursor=a},a.exports=b},61947:(a,b,c)=>{"use strict";let d=c(79551),e=c(81630),f=c(55591),{gzipSync:g}=c(74075),{globalRegistry:h}=c(29122);class i{constructor(a,b,c){c||(c=h),this.registry=c,this.gatewayUrl=a;let{requireJobName:d,...e}={requireJobName:!0,...b};this.requireJobName=d,this.requestOptions=e}pushAdd(a={}){if(this.requireJobName&&!a.jobName)throw Error("Missing jobName parameter");return j.call(this,"POST",a.jobName,a.groupings)}push(a={}){if(this.requireJobName&&!a.jobName)throw Error("Missing jobName parameter");return j.call(this,"PUT",a.jobName,a.groupings)}delete(a={}){if(this.requireJobName&&!a.jobName)throw Error("Missing jobName parameter");return j.call(this,"DELETE",a.jobName,a.groupings)}}async function j(a,b,c){var h;let i=d.parse(this.gatewayUrl),j=i.pathname&&"/"!==i.pathname?i.pathname:"",k=b?`/job/${encodeURIComponent(b)}${(h=c)?Object.keys(h).map(a=>`/${encodeURIComponent(a)}/${encodeURIComponent(h[a])}`).join(""):""}`:"",l=`${j}/metrics${k}`,m=d.resolve(this.gatewayUrl,l),n=d.parse(m),o=-1!==n.href.search(/^https/)?f:e,p=Object.assign(n,this.requestOptions,{method:a});return new Promise((b,c)=>{"DELETE"===a&&p.headers&&delete p.headers["Content-Encoding"];let d=o.request(p,a=>{let d="";a.setEncoding("utf8"),a.on("data",a=>{d+=a}),a.on("end",()=>{a.statusCode>=400?c(Error(`push failed with status ${a.statusCode}, ${d}`)):b({resp:a,body:d})})});d.on("error",a=>{c(a)}),d.on("timeout",()=>{d.destroy(Error("Pushgateway request timed out"))}),"DELETE"!==a?this.registry.metrics().then(a=>{p.headers&&"gzip"===p.headers["Content-Encoding"]&&(a=g(a)),d.write(a),d.end()}).catch(a=>{c(a)}):d.end()})}a.exports=i},67733:(a,b)=>{"use strict";function c(a,b){if(0===a.length)return"";let c="";for(let d=0;d<a.length;d++){let e=a[d],f=b[e];void 0!==f&&(c+=`${e}:${f},`)}return c}function d(a,b){if(b)return c(b,a);let d=Object.keys(a);return d.length>1&&d.sort(),c(d,a)}b.getValueAsString=function(a){return Number.isNaN(a)?"Nan":Number.isFinite(a)?`${a}`:a<0?"-Inf":"+Inf"},b.removeLabels=function(a,b,c){let e=d(b,c);delete a[e]},b.setValue=function(a,b,c){return a[d(c)]={value:"number"==typeof b?b:0,labels:c||{}},a},b.setValueDelta=function(a,b,c,d=""){let e="number"==typeof b?b:0;return a[d]?a[d].value+=e:a[d]={value:e,labels:c},a},b.getLabels=function(a,b){if("object"==typeof b[0])return b[0];if(a.length!==b.length)throw Error(`Invalid number of arguments (${b.length}): "${b.join(", ")}" for label names (${a.length}): "${a.join(", ")}".`);let c={};for(let d=0;d<a.length;d++)c[a[d]]=b[d];return c},b.hashObject=d,b.isObject=function(a){return null!==a&&"object"==typeof a},b.nowTimestamp=function(){return Date.now()/1e3};class e extends Map{add(a,b){this.has(a)?this.get(a).push(b):this.set(a,[b])}}b.Grouper=e},67971:(a,b,c)=>{var d=c(57797);function e(a){this.data=a,this.left=null,this.right=null}function f(a){this._root=null,this._comparator=a,this.size=0}e.prototype.get_child=function(a){return a?this.right:this.left},e.prototype.set_child=function(a,b){a?this.right=b:this.left=b},f.prototype=new d,f.prototype.insert=function(a){if(null===this._root)return this._root=new e(a),this.size++,!0;for(var b=0,c=null,d=this._root;;){if(null===d)return d=new e(a),c.set_child(b,d),ret=!0,this.size++,!0;if(0===this._comparator(d.data,a))return!1;b=0>this._comparator(d.data,a),c=d,d=d.get_child(b)}},f.prototype.remove=function(a){if(null===this._root)return!1;var b=new e(void 0),c=b;c.right=this._root;for(var d=null,f=null,g=1;null!==c.get_child(g);){d=c,c=c.get_child(g);var h=this._comparator(a,c.data);g=h>0,0===h&&(f=c)}return null!==f&&(f.data=c.data,d.set_child(d.right===c,c.get_child(null===c.left)),this._root=b.right,this.size--,!0)},a.exports=f},68576:(a,b,c)=>{"use strict";let d=c(80058),e=c(29021),f=["VmSize","VmRSS","VmData"],g="process_resident_memory_bytes",h="process_virtual_memory_bytes",i="process_heap_bytes";a.exports=(a,b={})=>{let c=a?[a]:void 0,j=b.prefix?b.prefix:"",k=b.labels?b.labels:{},l=Object.keys(k),m=new d({name:j+g,help:"Resident memory size in bytes.",registers:c,labelNames:l,collect(){try{let a=e.readFileSync("/proc/self/status","utf8").split("\n").reduce((a,b)=>{if(!f.some(a=>b.startsWith(a)))return a;let c=b.split(":"),d=c[1].trim();return d=1024*Number(d=d.substr(0,d.length-3)),a[c[0]]=d,a},{});m.set(k,a.VmRSS),n.set(k,a.VmSize),o.set(k,a.VmData)}catch{}}}),n=new d({name:j+h,help:"Virtual memory size in bytes.",registers:c,labelNames:l}),o=new d({name:j+i,help:"Process heap size in bytes.",registers:c,labelNames:l})},a.exports.metricNames=[g,h,i]},68737:(a,b,c)=>{"use strict";let d,e=c(53063);try{d=c(74998)}catch{}let f="nodejs_gc_duration_seconds",g=[.001,.01,.1,1,2,5],h=[];d&&d.constants&&(h[d.constants.NODE_PERFORMANCE_GC_MAJOR]="major",h[d.constants.NODE_PERFORMANCE_GC_MINOR]="minor",h[d.constants.NODE_PERFORMANCE_GC_INCREMENTAL]="incremental",h[d.constants.NODE_PERFORMANCE_GC_WEAKCB]="weakcb"),a.exports=(a,b={})=>{if(!d)return;let c=b.prefix?b.prefix:"",i=b.labels?b.labels:{},j=new e({name:c+f,help:"Garbage collection duration by kind, one of major, minor, incremental or weakcb.",labelNames:["kind",...Object.keys(i)],enableExemplars:!1,buckets:b.gcDurationBuckets?b.gcDurationBuckets:g,registers:a?[a]:void 0});new d.PerformanceObserver(a=>{let b=a.getEntries()[0],c=b.detail?h[b.detail.kind]:h[b.kind];j.observe(Object.assign({kind:c},i),b.duration/1e3)}).observe({entryTypes:["gc"]})},a.exports.metricNames=[f]},69328:(a,b,c)=>{"use strict";let d,e=c(80058),f=c(29021),g="process_max_fds";a.exports=(a,b={})=>{if(void 0===d)try{for(let a of f.readFileSync("/proc/self/limits","utf8").split("\n"))if(a.startsWith("Max open files")){let b=a.split(/  +/);d=Number(b[1]);break}}catch{return}if(void 0===d)return;let c=b.prefix?b.prefix:"",h=b.labels?b.labels:{};new e({name:c+g,help:"Maximum number of open file descriptors.",registers:a?[a]:void 0,labelNames:Object.keys(h),collect(){void 0!==d&&this.set(h,d)}})},a.exports.metricNames=[g]},71390:(a,b,c)=>{"use strict";let d=c(80058),e=c(37376),f="nodejs_heap_size_total_bytes",g="nodejs_heap_size_used_bytes",h="nodejs_external_memory_bytes";a.exports=(a,b={})=>{if("function"!=typeof process.memoryUsage)return;let c=b.labels?b.labels:{},i=Object.keys(c),j=a?[a]:void 0,k=b.prefix?b.prefix:"",l=new d({name:k+f,help:"Process heap size from Node.js in bytes.",registers:j,labelNames:i,collect:()=>{let a=e();a&&(l.set(c,a.heapTotal),m.set(c,a.heapUsed),void 0!==a.external&&n.set(c,a.external))}}),m=new d({name:k+g,help:"Process heap size used from Node.js in bytes.",registers:j,labelNames:i}),n=new d({name:k+h,help:"Node.js external memory size in bytes.",registers:j,labelNames:i})},a.exports.metricNames=[f,g,h]},71949:(a,b,c)=>{"use strict";let d,e=c(80058);try{d=c(74998)}catch{}let f="nodejs_eventloop_lag_seconds",g="nodejs_eventloop_lag_min_seconds",h="nodejs_eventloop_lag_max_seconds",i="nodejs_eventloop_lag_mean_seconds",j="nodejs_eventloop_lag_stddev_seconds",k="nodejs_eventloop_lag_p50_seconds",l="nodejs_eventloop_lag_p90_seconds",m="nodejs_eventloop_lag_p99_seconds";function n(a,b,c){let d=process.hrtime(a),e=1e9*d[0]+d[1];b.set(c,e/1e9)}a.exports=(a,b={})=>{let c=b.prefix?b.prefix:"",o=b.labels?b.labels:{},p=Object.keys(o),q=a?[a]:void 0,r=()=>{setImmediate(n,process.hrtime(),s,o)};if(d&&d.monitorEventLoopDelay)try{let a=d.monitorEventLoopDelay({resolution:b.eventLoopMonitoringPrecision});a.enable(),r=()=>{let b=process.hrtime();setImmediate(n,b,s,o),t.set(o,a.min/1e9),u.set(o,a.max/1e9),v.set(o,a.mean/1e9),w.set(o,a.stddev/1e9),x.set(o,a.percentile(50)/1e9),y.set(o,a.percentile(90)/1e9),z.set(o,a.percentile(99)/1e9),a.reset()}}catch(a){if("ERR_NOT_IMPLEMENTED"===a.code)return;throw a}let s=new e({name:c+f,help:"Lag of event loop in seconds.",registers:q,labelNames:p,aggregator:"average",collect:r}),t=new e({name:c+g,help:"The minimum recorded event loop delay.",registers:q,labelNames:p,aggregator:"min"}),u=new e({name:c+h,help:"The maximum recorded event loop delay.",registers:q,labelNames:p,aggregator:"max"}),v=new e({name:c+i,help:"The mean of the recorded event loop delays.",registers:q,labelNames:p,aggregator:"average"}),w=new e({name:c+j,help:"The standard deviation of the recorded event loop delays.",registers:q,labelNames:p,aggregator:"average"}),x=new e({name:c+k,help:"The 50th percentile of the recorded event loop delays.",registers:q,labelNames:p,aggregator:"average"}),y=new e({name:c+l,help:"The 90th percentile of the recorded event loop delays.",registers:q,labelNames:p,aggregator:"average"}),z=new e({name:c+m,help:"The 99th percentile of the recorded event loop delays.",registers:q,labelNames:p,aggregator:"average"})},a.exports.metricNames=[f,g,h,i,j,k,l,m]},72248:(a,b,c)=>{"use strict";let{TDigest:d}=c(6008);class e{constructor(a,b){this.maxAgeSeconds=a||0,this.ageBuckets=b||0,this.shouldRotate=a&&b,this.ringBuffer=Array(b).fill(new d),this.currentBuffer=0,this.lastRotateTimestampMillis=Date.now(),this.durationBetweenRotatesMillis=1e3*a/b||1/0}size(){return f.call(this).size()}percentile(a){return f.call(this).percentile(a)}push(a){f.call(this),this.ringBuffer.forEach(b=>{b.push(a)})}reset(){this.ringBuffer.forEach(a=>{a.reset()})}compress(){this.ringBuffer.forEach(a=>{a.compress()})}}function f(){let a=Date.now()-this.lastRotateTimestampMillis;for(;a>this.durationBetweenRotatesMillis&&this.shouldRotate;)this.ringBuffer[this.currentBuffer]=new d,++this.currentBuffer>=this.ringBuffer.length&&(this.currentBuffer=0),a-=this.durationBetweenRotatesMillis,this.lastRotateTimestampMillis+=this.durationBetweenRotatesMillis;return this.ringBuffer[this.currentBuffer]}a.exports=e},73651:(a,b,c)=>{"use strict";let d=c(80058),e=c(77824),f=["total","used","available"],g={};f.forEach(a=>{g[a]=`nodejs_heap_space_size_${a}_bytes`}),a.exports=(a,b={})=>{try{e.getHeapSpaceStatistics()}catch(a){if("ERR_NOT_IMPLEMENTED"===a.code)return;throw a}let c=a?[a]:void 0,h=b.prefix?b.prefix:"",i=b.labels?b.labels:{},j=["space",...Object.keys(i)],k={};f.forEach(a=>{k[a]=new d({name:h+g[a],help:`Process heap space size ${a} from Node.js in bytes.`,labelNames:j,registers:c})}),k.total.collect=()=>{for(let a of e.getHeapSpaceStatistics()){let b=a.space_name.substr(0,a.space_name.indexOf("_space"));k.total.set({space:b,...i},a.space_size),k.used.set({space:b,...i},a.space_used_size),k.available.set({space:b,...i},a.space_available_size)}}},a.exports.metricNames=Object.values(g)},76909:(a,b)=>{"use strict";b.linearBuckets=(a,b,c)=>{if(c<1)throw Error("Linear buckets needs a positive count");let d=Array(c);for(let e=0;e<c;e++)d[e]=a+e*b;return d},b.exponentialBuckets=(a,b,c)=>{if(a<=0)throw Error("Exponential buckets needs a positive start");if(c<1)throw Error("Exponential buckets needs a positive count");if(b<=1)throw Error("Exponential buckets needs a factor greater than 1");let d=Array(c);for(let e=0;e<c;e++)d[e]=a,a*=b;return d}},80058:(a,b,c)=>{"use strict";let d=c(28354),{setValue:e,setValueDelta:f,getLabels:g,hashObject:h,isObject:i,removeLabels:j}=c(67733),{validateLabel:k}=c(46522),{Metric:l}=c(96085);class m extends l{constructor(a){super(a),this.type="gauge"}set(a,b){var c,f;c=a,f=b,b=i(c)?f:c,function(a,b,c){if("number"!=typeof c)throw TypeError(`Value is not a valid number: ${d.format(c)}`);k(a.labelNames,b),e(a.hashMap,c,b)}(this,a=o(a),b)}reset(){this.hashMap={},0===this.labelNames.length&&e(this.hashMap,0,{})}inc(a,b){var c,d;c=a,d=b,b=i(c)?d:c,a=o(a),void 0===b&&(b=1),n(this,a,b)}dec(a,b){var c,d;c=a,d=b,b=i(c)?d:c,a=o(a),void 0===b&&(b=1),n(this,a,-b)}setToCurrentTime(a){let b=Date.now()/1e3;void 0===a?this.set(b):this.set(a,b)}startTimer(a){let b=process.hrtime();return c=>{let d=process.hrtime(b),e=d[0]+d[1]/1e9;return this.set(Object.assign({},a,c),e),e}}async get(){if(this.collect){let a=this.collect();a instanceof Promise&&await a}return{help:this.help,name:this.name,type:this.type,values:Object.values(this.hashMap),aggregator:this.aggregator}}_getValue(a){let b=h(a||{},this.sortedLabelNames);return this.hashMap[b]?this.hashMap[b].value:0}labels(...a){let b=g(this.labelNames,a);return k(this.labelNames,b),{inc:this.inc.bind(this,b),dec:this.dec.bind(this,b),set:this.set.bind(this,b),setToCurrentTime:this.setToCurrentTime.bind(this,b),startTimer:this.startTimer.bind(this,b)}}remove(...a){let b=g(this.labelNames,a);k(this.labelNames,b),j.call(this,this.hashMap,b,this.sortedLabelNames)}}function n(a,b,c){if("number"!=typeof c)throw TypeError(`Delta is not a valid number: ${d.format(c)}`);k(a.labelNames,b);let e=h(b,a.sortedLabelNames);f(a.hashMap,c,b,e)}function o(a){return i(a)?a:{}}a.exports=m},82953:(a,b,c)=>{"use strict";let d=c(80058),{updateMetrics:e}=c(39714),f="nodejs_active_resources",g="nodejs_active_resources_total";a.exports=(a,b={})=>{if("function"!=typeof process.getActiveResourcesInfo)return;let c=b.prefix?b.prefix:"",h=b.labels?b.labels:{},i=Object.keys(h);new d({name:c+f,help:"Number of active resources that are currently keeping the event loop alive, grouped by async resource type.",labelNames:["type",...i],registers:a?[a]:void 0,collect(){let a=process.getActiveResourcesInfo(),b={};for(let c=0;c<a.length;c++){let d=a[c];Object.hasOwn(b,d)?b[d]+=1:b[d]=1}e(this,b,h)}}),new d({name:c+g,help:"Total number of active resources.",registers:a?[a]:void 0,labelNames:i,collect(){let a=process.getActiveResourcesInfo();this.set(h,a.length)}})},a.exports.metricNames=[f,g]},93952:(a,b,c)=>{"use strict";let d=c(80058),e=c(29021),f=c(19771),g="process_open_fds";a.exports=(a,b={})=>{if("linux"!==f.platform)return;let c=b.prefix?b.prefix:"",h=b.labels?b.labels:{};new d({name:c+g,help:"Number of open file descriptors.",registers:a?[a]:void 0,labelNames:Object.keys(h),collect(){try{let a=e.readdirSync("/proc/self/fd");this.set(h,a.length-1)}catch{}}})},a.exports.metricNames=[g]},96085:(a,b,c)=>{"use strict";let d=c(29122),{isObject:e}=c(67733),{validateMetricName:f,validateLabelName:g}=c(46522);class h{constructor(a,b={}){if(!e(a))throw TypeError("constructor expected a config object");if(Object.assign(this,{labelNames:[],registers:[d.globalRegistry],aggregator:"sum",enableExemplars:!1},b,a),this.registers||(this.registers=[d.globalRegistry]),!this.help)throw Error("Missing mandatory help parameter");if(!this.name)throw Error("Missing mandatory name parameter");if(!f(this.name))throw Error("Invalid metric name");if(!g(this.labelNames))throw Error("Invalid label name");if(this.collect&&"function"!=typeof this.collect)throw Error('Optional "collect" parameter must be a function');for(let a of(this.labelNames?this.sortedLabelNames=[...this.labelNames].sort():this.sortedLabelNames=[],this.reset(),this.registers)){if(this.enableExemplars&&a.contentType===d.PROMETHEUS_CONTENT_TYPE)throw TypeError("Exemplars are supported only on OpenMetrics registries");a.registerMetric(this)}}reset(){}}a.exports={Metric:h}},97612:(a,b,c)=>{"use strict";let d=c(80058),{aggregateByObjectName:e}=c(39714),{updateMetrics:f}=c(39714),g="nodejs_active_requests",h="nodejs_active_requests_total";a.exports=(a,b={})=>{if("function"!=typeof process._getActiveRequests)return;let c=b.prefix?b.prefix:"",i=b.labels?b.labels:{},j=Object.keys(i);new d({name:c+g,help:"Number of active libuv requests grouped by request type. Every request type is C++ class name.",labelNames:["type",...j],registers:a?[a]:void 0,collect(){f(this,e(process._getActiveRequests()),i)}}),new d({name:c+h,help:"Total number of active requests.",registers:a?[a]:void 0,labelNames:j,collect(){let a=process._getActiveRequests();this.set(i,a.length)}})},a.exports.metricNames=[g,h]}};
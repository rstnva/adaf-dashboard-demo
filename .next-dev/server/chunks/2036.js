"use strict";exports.id=2036,exports.ids=[2036],exports.modules={11360:(a,b,c)=>{c.d(b,{j:()=>f});var d=c(932),e=c(33925);let f=(0,d.vt)()((0,e.Zr)((a,b)=>({selectedAssets:["BTC","ETH"],range:"7D",currency:"USD",timezone:"America/Mexico_City",asOf:"now",sidebarCollapsed:!1,searchOpen:!1,setSelectedAssets:b=>a({selectedAssets:b}),setRange:b=>a({range:b}),setCurrency:b=>a({currency:b}),setTimezone:b=>a({timezone:b}),setAsOf:b=>a({asOf:b}),toggleSidebar:()=>a(a=>({sidebarCollapsed:!a.sidebarCollapsed})),toggleSearch:()=>a(a=>({searchOpen:!a.searchOpen})),getFormattedAsOf:()=>{let a=b(),c="now"===a.asOf?new Date:a.asOf;return new Intl.DateTimeFormat("en-US",{timeZone:a.timezone,year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZoneName:"short"}).format(c)},getAssetParams:()=>b().selectedAssets.join(",")}),{name:"adaf-ui-state",partialize:a=>({selectedAssets:a.selectedAssets,range:a.range,currency:a.currency,timezone:a.timezone,sidebarCollapsed:a.sidebarCollapsed})}))},36172:(a,b,c)=>{c.d(b,{Cf:()=>l,Es:()=>n,L3:()=>o,c7:()=>m,lG:()=>h,rr:()=>p,zM:()=>i});var d=c(4026);c(58563);var e=c(78122),f=c(16456),g=c(45159);function h({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dialog",...a})}function i({...a}){return(0,d.jsx)(e.l9,{"data-slot":"dialog-trigger",...a})}function j({...a}){return(0,d.jsx)(e.ZL,{"data-slot":"dialog-portal",...a})}function k({className:a,...b}){return(0,d.jsx)(e.hJ,{"data-slot":"dialog-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function l({className:a,children:b,showCloseButton:c=!0,...h}){return(0,d.jsxs)(j,{"data-slot":"dialog-portal",children:[(0,d.jsx)(k,{}),(0,d.jsxs)(e.UC,{"data-slot":"dialog-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...h,children:[b,c&&(0,d.jsxs)(e.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,d.jsx)(f.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-header",className:(0,g.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function n({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-footer",className:(0,g.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function o({className:a,...b}){return(0,d.jsx)(e.hE,{"data-slot":"dialog-title",className:(0,g.cn)("text-lg leading-none font-semibold",a),...b})}function p({className:a,...b}){return(0,d.jsx)(e.VY,{"data-slot":"dialog-description",className:(0,g.cn)("text-muted-foreground text-sm",a),...b})}},48396:(a,b,c)=>{c.d(b,{$:()=>j});var d=c(4026),e=c(58563),f=c(56526),g=c(86297),h=c(45159);let i=(0,g.F)("relative inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium tracking-tight ring-offset-background transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-300/70 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 motion-safe:transform",{variants:{variant:{default:"border border-amber-300/30 bg-gradient-to-r from-amber-500/80 via-amber-400/80 to-yellow-300/80 text-zinc-900 shadow-[0_18px_50px_-25px_rgba(250,204,21,0.65)] hover:from-amber-400/90 hover:to-yellow-200/90 active:scale-95",destructive:"border border-rose-500/50 bg-rose-500/25 text-rose-100 hover:bg-rose-500/35",outline:"border border-amber-200/30 bg-transparent text-amber-100/80 hover:border-amber-200/60 hover:bg-amber-500/10 hover:text-amber-100",secondary:"border border-zinc-700/40 bg-zinc-800/60 text-amber-100 hover:bg-zinc-700/60",ghost:"text-amber-200/80 hover:text-amber-100 hover:bg-amber-500/10",link:"text-amber-200 hover:text-amber-100 underline-offset-4 hover:underline"},size:{default:"h-10 px-5",sm:"h-9 rounded-lg px-4",lg:"h-12 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},72036:(a,b,c)=>{c.d(b,{NavigationGuard:()=>o});var d=c(4026),e=c(58563),f=c(22233),g=c.n(f),h=c(93420),i=c(48396),j=c(36172),k=c(20195),l=c(16456),m=c(59167),n=c(99483);function o({hasUnsavedChanges:a=!1,onSave:b,data:c,storageKey:f,children:o,showBackButton:p=!0,backUrl:q,fallbackUrl:r="/"}){let s=(0,h.useRouter)(),t=(0,h.usePathname)(),{toast:u}=(0,n.dj)(),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(null),[z,A]=(0,e.useState)(!1),B=(0,e.useCallback)(async()=>{if(c&&f)try{let a={data:c,timestamp:Date.now(),pathname:t,expiresAt:Date.now()+2592e6};localStorage.setItem(`adaf_autosave_${f}`,JSON.stringify(a))}catch(a){console.warn("Failed to auto-save data:",a)}},[c,f,t]),C=(0,e.useCallback)(()=>q||r,[q,r]),D=(0,e.useMemo)(()=>C(),[C]),E="back"===D?q??r??"/":D,F=async()=>{if(b){A(!0);try{await b(),u({title:"Datos guardados",description:"Los datos se han guardado correctamente."})}catch(a){u({title:"Error al guardar",description:"No se pudieron guardar los datos. Se guardar\xe1n autom\xe1ticamente.",variant:"destructive"})}finally{A(!1)}}await B(),w(!1);let a=x??D;"back"===a?s.back():s.push(a)},G=async()=>{await B(),w(!1);let a=x??D;"back"===a?s.back():s.push(a)};return(0,d.jsxs)(d.Fragment,{children:[p&&(a?(0,d.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>{if(a){w(!0),y(D);return}"back"===D?s.back():s.push(D)},className:"mb-4 text-muted-foreground hover:text-foreground",children:[(0,d.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Regresar"]}):(0,d.jsx)(i.$,{asChild:!0,variant:"ghost",size:"sm",className:"mb-4 text-muted-foreground hover:text-foreground",children:(0,d.jsxs)(g(),{href:E,prefetch:!1,children:[(0,d.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Regresar"]})})),o,(0,d.jsx)(j.lG,{open:v,onOpenChange:w,children:(0,d.jsxs)(j.Cf,{children:[(0,d.jsxs)(j.c7,{children:[(0,d.jsxs)(j.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(l.A,{className:"w-5 h-5 text-destructive"}),"\xbfDesea salir de esta p\xe1gina?"]}),(0,d.jsxs)(j.rr,{children:["Tienes cambios sin guardar. \xbfQu\xe9 deseas hacer?",(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground mt-2 block",children:"\uD83D\uDCA1 Los datos se guardan autom\xe1ticamente cada 30 segundos y se conservan por 30 d\xedas."})]})]}),(0,d.jsxs)(j.Es,{className:"gap-2",children:[(0,d.jsx)(i.$,{variant:"outline",onClick:()=>{w(!1),y(null)},children:"Quedarse"}),(0,d.jsx)(i.$,{variant:"secondary",onClick:G,children:"Salir sin guardar"}),(0,d.jsxs)(i.$,{onClick:F,disabled:z,className:"gap-2",children:[(0,d.jsx)(m.A,{className:"w-4 h-4"}),z?"Guardando...":"Guardar y salir"]})]})]})})]})}},99483:(a,b,c)=>{c.d(b,{sS:()=>g,sY:()=>h,fX:()=>o,Jh:()=>l,cK:()=>k,$M:()=>q,dj:()=>p.dj});var d=c(11360),e=c(2756);async function f(){let a=["SSV","DB"][Math.floor(Date.now()/3e4)%2];return{source:a,currentAllocation:{btc:65,eth:35},recommendedAllocation:{btc:"SSV"===a?70:60,eth:"SSV"===a?30:40},lastRebalance:new Date(Date.now()-144e5).toISOString(),confidence:"SSV"===a?.87:.92}}function g(){let{selectedAssets:a,range:b,currency:c,timezone:g}=(0,d.j)(),h=(0,e.I)({queryKey:["etf","flows",a,b,c,g],queryFn:async()=>{let d=new URLSearchParams({asset:a.join("|"),days:b.replace("D",""),provider:"any",currency:c,timezone:g}),e=await fetch(`/api/read/etf/flow?${d}`);if(!e.ok)throw Error(`ETF Flows API error: ${e.status}`);return e.json()},staleTime:6e4,retry:1}),i=(0,e.I)({queryKey:["etf","compare",b,c,g],queryFn:async()=>{let a=new URLSearchParams({range:b,currency:c,timezone:g}),d=await fetch(`/api/read/etf/flow2?${a}`);if(!d.ok)throw Error(`ETF Compare API error: ${d.status}`);return d.json()},staleTime:12e4,retry:1}),j=(0,e.I)({queryKey:["etf","autoswitch"],queryFn:f,staleTime:3e4,refetchInterval:3e4,retry:1});return{flows:{data:h.data,isLoading:h.isLoading,error:h.error,refetch:h.refetch},compare:{data:i.data,isLoading:i.isLoading,error:i.error,refetch:i.refetch},autoswitch:{data:j.data,isLoading:j.isLoading,error:j.error,refetch:j.refetch},isLoading:h.isLoading||i.isLoading||j.isLoading,error:h.error||i.error||j.error}}function h(){let{selectedAssets:a,range:b,timezone:c}=(0,d.j)(),f=(0,e.I)({queryKey:["derivs","funding",a,b,c],queryFn:async()=>{let d=new URLSearchParams({asset:a.join(","),days:b.replace("D",""),timezone:c}),e=await fetch(`/api/read/derivs/funding?${d}`);if(!e.ok)return[];let f=await e.json().catch(()=>[]);return Array.isArray(f)?f:f&&Array.isArray(f?.data)?f.data:[]},staleTime:12e4,retry:1}),g=(0,e.I)({queryKey:["derivs","gamma",a,c],queryFn:async()=>{let b=new URLSearchParams({asset:a.join(","),tenors:"7,14,30",timezone:c}),d=await fetch(`/api/read/derivs/gamma?${b}`);if(!d.ok)return[];let e=await d.json().catch(()=>[]);return Array.isArray(e)?e:e&&Array.isArray(e?.data)?e.data:[]},staleTime:12e4,retry:1});return{funding:{data:f.data,isLoading:f.isLoading,error:f.error,refetch:f.refetch},gamma:{data:g.data,isLoading:g.isLoading,error:g.error,refetch:g.refetch},isLoading:f.isLoading||g.isLoading,error:f.error||g.error}}var i=c(58563),j=c(61144);function k(){let{timezone:a}=(0,d.j)(),b=(0,j.jE)(),c=(0,i.useCallback)(b=>["onchain","tvl-heatmap",b,a],[a]),f=(0,i.useCallback)(async b=>{let c=new URLSearchParams({days:b.toString(),timezone:a}),d=await fetch(`/api/read/onchain/tvl-heatmap?${c}`);if(!d.ok)throw Error(`TVL Heatmap API error: ${d.status}`);return d.json()},[a]),g=(0,e.I)({queryKey:c(7),queryFn:()=>f(7),staleTime:12e4,retry:1}),h=(0,e.I)({queryKey:["onchain","stablecoin-flows",a],queryFn:async()=>[{token:"USDT",netFlow24h:45e6,netFlow7d:28e7,totalSupply:12e10,timestamp:new Date().toISOString()},{token:"USDC",netFlow24h:-12e6,netFlow7d:95e6,totalSupply:85e9,timestamp:new Date().toISOString()}],staleTime:12e4,retry:1}),k=(0,i.useCallback)(a=>b.getQueryData(c(a)),[b,c]),l=(0,i.useCallback)(async a=>b.fetchQuery({queryKey:c(a),queryFn:()=>f(a),staleTime:12e4,gcTime:36e4}),[b,c,f]),m=(0,i.useCallback)(async a=>b.prefetchQuery({queryKey:c(a),queryFn:()=>f(a),staleTime:12e4,gcTime:36e4}),[b,c,f]);return{tvlHeatmap:{data:g.data,isLoading:g.isLoading,error:g.error,refetch:g.refetch},getCachedTvlHeatmap:k,stablecoinFlows:{data:h.data,isLoading:h.isLoading,error:h.error,refetch:h.refetch},prefetchTvlHeatmap:m,getTvlHeatmapByDays:l,isLoading:g.isLoading||h.isLoading,error:g.error||h.error}}function l(){let{timezone:a}=(0,d.j)(),b=(0,e.I)({queryKey:["news",a],queryFn:async()=>{let b=new URLSearchParams({limit:"20",timezone:a}),c=await fetch(`/api/read/news?${b}`);if(!c.ok)throw Error(`News API error: ${c.status}`);return c.json()},staleTime:6e4,retry:1}),c=async b=>{let c=new URLSearchParams({impact:b,limit:"20",timezone:a}),d=await fetch(`/api/read/news?${c}`);if(!d.ok)throw Error(`News API error: ${d.status}`);return d.json()},f=(0,e.I)({queryKey:["regulation","calendar",a],queryFn:async()=>{let b=new URLSearchParams({days:"7",timezone:a}),c=await fetch(`/api/read/reg/calendar?${b}`);if(!c.ok){if(404===c.status)return[{id:"1",title:"Fed Interest Rate Decision",date:new Date(Date.now()+1728e5).toISOString(),type:"economic",importance:"high",description:"Federal Reserve announces interest rate decision"},{id:"2",title:"EU MiCA Regulation Implementation",date:new Date(Date.now()+432e6).toISOString(),type:"regulatory",importance:"medium",description:"Markets in Crypto-Assets regulation comes into effect"}];throw Error(`Regulation Calendar API error: ${c.status}`)}return c.json()},staleTime:6e4,retry:1}),g=(0,e.I)({queryKey:["regulation","items",a],queryFn:async()=>[{id:"1",title:"SEC Bitcoin ETF Guidelines Update",jurisdiction:"US",type:"guidance",effectiveDate:new Date(Date.now()+2592e6).toISOString(),summary:"Updated guidelines for Bitcoin ETF applications and compliance requirements",impact:"high"},{id:"2",title:"EU Stablecoin Reserves Requirements",jurisdiction:"EU",type:"law",effectiveDate:new Date(Date.now()+5184e6).toISOString(),summary:"New reserve requirements for stablecoin issuers in European Union",impact:"medium"}],staleTime:6e4,retry:1});return{news:{data:b.data,isLoading:b.isLoading,error:b.error,refetch:b.refetch},regulation:{data:g.data,isLoading:g.isLoading,error:g.error,refetch:g.refetch},calendar:{data:f.data,isLoading:f.isLoading,error:f.error,refetch:f.refetch},getNewsByImpact:c,isLoading:b.isLoading||g.isLoading||f.isLoading,error:b.error||g.error||f.error}}var m=c(9491);async function n(a,b){let c=await fetch(a,{headers:{"content-type":"application/json"},...b});if(!c.ok){let a=Error(await c.text()||c.statusText);throw a.status=c.status,a}return c.json()}function o(a){let b=(0,j.jE)(),c=(0,e.I)({queryKey:["news-oracle","standby"],queryFn:()=>n("/api/news/oracle/standby"),enabled:a,retry:!1});return{standby:c,triage:(0,e.I)({queryKey:["news-oracle","triage"],queryFn:()=>n("/api/news/oracle/triage"),enabled:a,retry:!1}),runPipeline:(0,m.n)({mutationFn:()=>n("/api/news/oracle/run",{method:"POST",body:JSON.stringify({})}),onSuccess:()=>{b.invalidateQueries({queryKey:["news-oracle","standby"]}),b.invalidateQueries({queryKey:["news-oracle","triage"]})}})}}var p=c(57568);function q(a){let b=(0,e.I)({queryKey:["oracle","dq-summary",a??"all"],queryFn:async()=>{let b=new URLSearchParams;a&&b.set("feed",a);let c=await fetch(`/api/read/oracle/dq/summary${b.size?`?${b.toString()}`:""}`);if(!c.ok)throw Error(`Oracle DQ summary API error: ${c.status}`);let d=await c.json();if(!d.ok||!d.summary)throw Error(d.error||"Oracle DQ summary payload inv\xe1lido");return d.summary},staleTime:3e4,gcTime:12e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:1});return{summary:b.data,isLoading:b.isLoading,error:b.error,refetch:b.refetch}}}};
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6319],{41944:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});var a=s(51833),r=s(59693),i=s(35429),n=s(85023),l=s(89788);function d(e,t){let s=(Array.isArray(t)?t.filter(e=>"string"==typeof e):[]).filter(t=>e.includes(t)),a=e.filter(e=>!s.includes(e));return[...s,...a]}var c=s(81429);function m(e){let{id:t,children:s,className:r,dataKey:i}=e,{attributes:d,listeners:c,setNodeRef:m,transform:o,transition:x}=(0,n.gl)({id:t}),u={transform:l.Ks.Transform.toString(o),transition:x};return(0,a.jsx)("div",{ref:m,style:u,...d,...c,className:r,"data-widget-key":i,children:s})}function o(e){var t;let{storageKey:s,widgets:l,gridClassName:o,orderAttribute:x}=e,u=(0,i.FR)((0,i.MS)(i.AN)),h=(0,r.useMemo)(()=>l.map(e=>e.key),[l]),j=(0,r.useMemo)(()=>new Map(l.map(e=>[e.key,e])),[l]),g=(0,r.useRef)(null);if(!g.current){let e=function(e){let t=window.localStorage.getItem(e);if(t)try{let e=JSON.parse(t);return Array.isArray(e)?e.filter(e=>"string"==typeof e):void 0}catch(t){console.warn("[layout] Failed to parse stored order for ".concat(e),t);return}}(s);g.current=e?d(h,e):[...h]}let[p,v]=(0,r.useState)(null!=(t=g.current)?t:[...h]),f=(0,r.useMemo)(()=>d(h,p),[h,p]);(0,r.useEffect)(()=>{v(e=>{let t=d(h,e);return t.length===e.length&&t.every((t,s)=>e[s]===t)?e:t})},[h]),(0,r.useEffect)(()=>{f.length&&window.localStorage.setItem(s,JSON.stringify(f))},[f,s]);let N=(0,r.useCallback)(e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&v(e=>{let a=d(h,e),r=a.indexOf(String(t.id)),i=a.indexOf(String(s.id));return -1===r||-1===i?a:(0,n.be)(a,r,i)})},[h]),b=x?{[x]:f.join(",")}:{};return(0,a.jsx)(i.Mp,{sensors:u,collisionDetection:i.fp,onDragEnd:N,children:(0,a.jsx)(n.gB,{items:f,strategy:n._G,children:(0,a.jsx)("div",{className:(0,c.cn)("grid gap-6 grid-cols-1",o),...b,children:f.map(e=>{let t=j.get(e);return t?(0,a.jsx)(m,{id:e,className:t.className,dataKey:e,children:(0,a.jsx)("div",{className:"h-full",children:t.component})},e):null})})})})}},59414:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(51833),r=s(59693),i=s(21196),n=s(11622),l=s(33399),d=s(4991),c=s(12780),m=s(69837),o=s(54239),x=s(54840),u=s(94804),h=s(75302),j=s(80571),g=s(1462),p=s(70933),v=s(27367),f=s(85623),N=s(81429),b=s(30249),y=s.n(b),w=s(41944);function A(e){var t;let{defaultAsset:s="BTC"}=e,[c,u]=(0,r.useState)(s),{funding:p}=(0,d.sY)(),{data:v,isLoading:f,error:b}=p,y=()=>{try{window.open("/api/read/derivs/funding?asset=".concat(c,"&format=csv"))}catch(r){let e=((null==v?void 0:v.filter(e=>e.asset===c))||[]).map(e=>({Exchange:e.exchange,Asset:e.asset,Rate:e.rate,Timestamp:e.timestamp,Status:e.rate<0?"Negative":"Normal"})),t=new Blob([[Object.keys(e[0]||{}).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","funding-rates-".concat(c,"-").concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)}};if(f)return(0,a.jsxs)(i.Zp,{className:"adaf-card",children:[(0,a.jsx)(m.a,{title:"Funding Rates",badge:"".concat(c," perpetual funding across exchanges"),actions:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",disabled:!0,children:"BTC"}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:y,children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)(o.X.Table,{})})]});if(b)return(0,a.jsxs)(i.Zp,{className:"adaf-card",children:[(0,a.jsx)(m.a,{title:"Funding Rates",badge:"".concat(c," perpetual funding across exchanges")}),(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)(x.W,{title:"Funding Data Unavailable"})})]});let w=(null==v?void 0:v.filter(e=>e.asset===c))||[],A=null==(t=w[0])?void 0:t.timestamp,E=w.reduce((e,t)=>e+t.rate,0)/w.length,C=w.filter(e=>e.rate>0).length,k=w.filter(e=>e.rate<0).length;return(0,a.jsxs)(i.Zp,{className:"adaf-card",children:[(0,a.jsx)(m.a,{title:"Funding Rates",badge:"".concat(c," perpetual funding across exchanges"),asOf:A,actions:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"BTC"===c?"default":"outline",size:"sm",onClick:()=>u("BTC"),children:"BTC"}),(0,a.jsx)(n.$,{variant:"ETH"===c?"default":"outline",size:"sm",onClick:()=>u("ETH"),children:"ETH"}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:y,children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),(0,a.jsxs)(i.Wu,{className:"p-6 pt-0",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:(0,N.cn)("text-2xl font-bold",E>0?"text-green-600":"text-red-600"),children:[(100*E).toFixed(4),"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Average Rate"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:C}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Positive"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:k}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Negative"})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b text-left",children:[(0,a.jsx)("th",{className:"pb-3 text-sm font-medium text-muted-foreground",children:"Exchange"}),(0,a.jsx)("th",{className:"pb-3 text-sm font-medium text-muted-foreground",children:"Current Rate"}),(0,a.jsx)("th",{className:"pb-3 text-sm font-medium text-muted-foreground",children:"24h Change"}),(0,a.jsx)("th",{className:"pb-3 text-sm font-medium text-muted-foreground",children:"Status"})]})}),(0,a.jsx)("tbody",{children:w.sort((e,t)=>t.rate-e.rate).map((e,t)=>{let s=e.rate<0,r=(Math.random()-.5)*.001,i=r>0;return(0,a.jsxs)("tr",{className:"border-b border-border/40",children:[(0,a.jsx)("td",{className:"py-3 font-medium",children:e.exchange}),(0,a.jsxs)("td",{className:(0,N.cn)("py-3 font-mono text-sm",s?"text-red-600":"text-green-600"),children:[(100*e.rate).toFixed(4),"%"]}),(0,a.jsx)("td",{className:(0,N.cn)("py-3 font-mono text-xs",i?"text-green-600":"text-red-600"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[i?(0,a.jsx)(j.A,{className:"h-3 w-3"}):(0,a.jsx)(g.A,{className:"h-3 w-3"}),i?"+":"",(100*r).toFixed(4),"%"]})}),(0,a.jsx)("td",{className:"py-3",children:s&&Math.abs(e.rate)>1e-4?(0,a.jsx)(l.E,{variant:"destructive",className:"text-xs",children:"High Negative"}):s?(0,a.jsx)(l.E,{variant:"secondary",className:"text-xs text-red-700",children:"Negative"}):e.rate>5e-4?(0,a.jsx)(l.E,{variant:"secondary",className:"text-xs text-orange-700",children:"High Positive"}):(0,a.jsx)(l.E,{variant:"outline",className:"text-xs",children:"Normal"})})]},t)})})]})})]})]})}function E(e){var t;let{defaultAsset:s="BTC"}=e,[l,u]=(0,r.useState)(s),{gamma:j}=(0,d.sY)(),{data:g,isLoading:b,error:y}=j,w=()=>{try{window.open("/api/read/derivs/gamma?asset=".concat(l,"&format=csv"))}catch(r){let e=((null==g?void 0:g.filter(e=>e.asset===l))||[]).map(e=>({Tenor:e.tenor,Asset:e.asset,Strike:e.strike,Gamma:e.gamma,Exposure:e.exposure,Timestamp:e.timestamp})),t=new Blob([[Object.keys(e[0]||{}).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",s),a.setAttribute("download","gamma-exposure-".concat(l,"-").concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),document.body.removeChild(a)}};if(b)return(0,a.jsxs)(i.Zp,{className:"adaf-card",children:[(0,a.jsx)(m.a,{title:"Options Gamma Exposure",badge:"".concat(l," options gamma levels and dealer positioning"),actions:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",disabled:!0,children:"BTC"}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:w,children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)(o.X.Table,{})})]});if(y)return(0,a.jsxs)(i.Zp,{className:"adaf-card",children:[(0,a.jsx)(m.a,{title:"Options Gamma Exposure",badge:"".concat(l," options gamma levels and dealer positioning")}),(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)(x.W,{title:"Gamma Data Unavailable"})})]});let A=(Array.isArray(g)?g:[]).filter(e=>e.asset===l),E=null==(t=A[0])?void 0:t.timestamp,C=A.reduce((e,t)=>e+t.gamma,0),k=A.reduce((e,t)=>e+t.gamma,0),S=Math.abs(k)<.1*Math.abs(C);return(0,a.jsxs)(i.Zp,{className:"adaf-card",children:[(0,a.jsx)(m.a,{title:"Options Gamma Exposure",badge:"".concat(l," options gamma levels and dealer positioning"),asOf:E,actions:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"BTC"===l?"default":"outline",size:"sm",onClick:()=>u("BTC"),children:"BTC"}),(0,a.jsx)(n.$,{variant:"ETH"===l?"default":"outline",size:"sm",onClick:()=>u("ETH"),children:"ETH"}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:w,children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),(0,a.jsxs)(i.Wu,{className:"p-6 pt-0",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:(0,N.cn)("text-2xl font-bold",C>0?"text-blue-600":"text-purple-600"),children:(0,c.vv)(C,"USD",!0)}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Gamma"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:(0,N.cn)("text-2xl font-bold",k>0?"text-green-600":"text-red-600"),children:(0,c.vv)(k,"USD",!0)}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Net Gamma"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[S&&(0,a.jsx)(p.A,{className:"h-5 w-5 text-orange-500"}),(0,a.jsx)("span",{className:(0,N.cn)("text-2xl font-bold",S?"text-orange-600":"text-gray-600"),children:S?"FLIP":"STABLE"})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Gamma Status"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Strike-Level Gamma Exposure"}),A.slice(0,8).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:["$",e.strike]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Tenor: ",e.tenor]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-right",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:(0,N.cn)("text-sm font-medium",e.gamma>0?"text-blue-600":"text-purple-600"),children:e.gamma.toFixed(6)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Gamma"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-orange-600",children:(0,c.vv)(e.exposure,"USD",!0)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Exposure"})]})]})]},t))]}),(0,a.jsx)("div",{className:"pt-4 border-t mt-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-blue-900",children:"Gamma Insight"}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:S?"".concat(l," is near gamma flip levels. Expect increased volatility."):"".concat(l," gamma positioning is stable. Market makers are providing liquidity.")})]})]})})]})]})}function C(){let{selectedAssets:e}=(0,u.j)(),t=e[0]||"BTC",s=(0,r.useMemo)(()=>[{key:"funding-panel",component:(0,a.jsx)(A,{defaultAsset:t})},{key:"gamma-panel",component:(0,a.jsx)(E,{defaultAsset:t})}],[t]);return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("nav",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)(y(),{href:"/",className:"hover:text-foreground",children:"Dashboard"}),(0,a.jsx)("span",{className:"mx-2",children:"›"}),(0,a.jsx)("span",{children:"Derivatives"})]}),(0,a.jsx)(w.x,{storageKey:"derivatives-sleeve-layout-v1",widgets:s,gridClassName:"lg:grid-cols-2",orderAttribute:"data-derivatives-order"})]})}},75302:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11097).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},85623:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(11097).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},90497:(e,t,s)=>{Promise.resolve().then(s.bind(s,59414))}},e=>{e.O(0,[3701,6333,249,3060,4802,5554,5034,9224,9959,1413,7358],()=>e(e.s=90497)),_N_E=e.O()}]);
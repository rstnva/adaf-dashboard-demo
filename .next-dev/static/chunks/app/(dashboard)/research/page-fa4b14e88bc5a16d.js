(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7194],{2446:(e,t,s)=>{Promise.resolve().then(s.bind(s,22742))},11622:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(51833),r=s(59693),n=s(39728),i=s(49639),l=s(81429);let o=(0,i.F)("relative inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium tracking-tight ring-offset-background transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-300/70 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 motion-safe:transform",{variants:{variant:{default:"border border-amber-300/30 bg-gradient-to-r from-amber-500/80 via-amber-400/80 to-yellow-300/80 text-zinc-900 shadow-[0_18px_50px_-25px_rgba(250,204,21,0.65)] hover:from-amber-400/90 hover:to-yellow-200/90 active:scale-95",destructive:"border border-rose-500/50 bg-rose-500/25 text-rose-100 hover:bg-rose-500/35",outline:"border border-amber-200/30 bg-transparent text-amber-100/80 hover:border-amber-200/60 hover:bg-amber-500/10 hover:text-amber-100",secondary:"border border-zinc-700/40 bg-zinc-800/60 text-amber-100 hover:bg-zinc-700/60",ghost:"text-amber-200/80 hover:text-amber-100 hover:bg-amber-500/10",link:"text-amber-200 hover:text-amber-100 underline-offset-4 hover:underline"},size:{default:"h-10 px-5",sm:"h-9 rounded-lg px-4",lg:"h-12 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},12686:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(51833);s(59693);var r=s(81429);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},16788:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var a=s(51833),r=s(59693),n=s(81429);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("label",{ref:t,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...r})});i.displayName="Label"},21196:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>m});var a=s(51833),r=s(59693),n=s(81429);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("relative overflow-hidden rounded-3xl border border-amber-300/20 bg-zinc-950/60 text-amber-100 shadow-[0_30px_90px_-40px_rgba(15,23,42,0.95)] backdrop-blur-2xl transition-all duration-300 ease-out motion-safe:transform hover:-translate-y-1 hover:shadow-[0_40px_140px_-35px_rgba(15,23,42,0.95)]",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-tight text-amber-100",s),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-amber-50/70",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0 text-amber-100/70",s),...r})});m.displayName="CardFooter"},22742:(e,t,s)=>{"use strict";s.d(t,{ResearchPanel:()=>ec});var a=s(51833),r=s(59693),n=s(84314),i=s(69632),l=s(14357),o=s(64780),c=s(36037),d=s(27367),m=s(80571),u=s(11622),x=s(21196),h=s(12686),p=s(16788),f=s(57896),g=s(85994),b=s(59335),v=s(81429);let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(b.bL,{ref:t,className:(0,v.cn)("relative flex w-full touch-none select-none items-center",s),...r,children:[(0,a.jsx)(b.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(b.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(b.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});j.displayName=b.bL.displayName;var N=s(33399),y=s(99835),w=s(83558),k=s(37114),C=s(37064),R=s(51758);class S extends Error{constructor(e,t,s){super(e),this.name="ResearchApiError",this.status=t,this.code=s}}async function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4,a=new AbortController,r=setTimeout(()=>a.abort(),s);try{let s=await fetch("".concat("/api/research").concat(e),{...t,signal:a.signal,headers:{"Content-Type":"application/json",...t.headers}});if(clearTimeout(r),!s.ok){let e,t="HTTP ".concat(s.status,": ").concat(s.statusText);try{let a=await s.json();a.error&&(t=a.error),a.code&&(e=a.code)}catch(e){}throw new S(t,s.status,e)}return s.json()}catch(e){if(clearTimeout(r),e instanceof S)throw e;if(e instanceof Error&&"AbortError"===e.name)throw new S("Request timeout",408);throw new S(e instanceof Error?e.message:"Unknown network error",0)}}class P{static async createBacktest(e){return D("/backtest",{method:"POST",body:JSON.stringify(e)})}static async runBacktest(e){return D("/backtest/run",{method:"POST",body:JSON.stringify(e)},12e4)}static async getBacktest(e){return D("/backtest/".concat(e))}static async listBacktests(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;void 0!==e.limit&&t.append("limit",e.limit.toString()),void 0!==e.offset&&t.append("offset",e.offset.toString()),void 0!==e.status&&t.append("status",e.status),e.actor&&t.append("actor",e.actor),e.benchmark&&t.append("benchmark",e.benchmark),e.orderBy&&t.append("orderBy",e.orderBy),e.orderDir&&t.append("orderDir",e.orderDir);let s=t.toString();return D("/backtests".concat(s?"?".concat(s):""))}static async promoteBacktest(e){return D("/backtest/promote",{method:"POST",body:JSON.stringify(e)})}static validateConfig(e){var t,s;let a=[];if((null==(t=e.name)?void 0:t.trim())||a.push("Name is required"),e.agents&&0!==e.agents.length||a.push("At least one agent is required"),e.rules&&0!==e.rules.length||a.push("At least one rule is required"),e.window.from&&e.window.to){let t=new Date(e.window.from),s=new Date(e.window.to);t>=s&&a.push("From date must be before to date");let r=Math.ceil((s.getTime()-t.getTime())/864e5);r<7&&a.push("Date range must be at least 7 days"),r>730&&a.push("Date range cannot exceed 2 years")}else a.push("Date range (from/to) is required");for(let t=0;t<e.rules.length;t++){let r=e.rules[t];(null==(s=r.expr)?void 0:s.trim())||a.push("Rule ".concat(t+1,": Expression is required")),void 0!==r.weight&&(r.weight<=0||r.weight>10)&&a.push("Rule ".concat(t+1,": Weight must be between 0 and 10"))}return(e.sizing.notionalPctNAV<=0||e.sizing.notionalPctNAV>1)&&a.push("Position size must be between 0% and 100%"),void 0!==e.feesBps&&(e.feesBps<0||e.feesBps>1e3)&&a.push("Fees must be between 0 and 1000 basis points"),void 0!==e.slippageBps&&(e.slippageBps<0||e.slippageBps>1e3)&&a.push("Slippage must be between 0 and 1000 basis points"),{valid:0===a.length,errors:a}}static canPromote(e){var t;if("done"!==e.status)return{canPromote:!1,reason:"Backtest must be completed"};if(!(null==(t=e.results)?void 0:t.kpis))return{canPromote:!1,reason:"Backtest results not available"};let{kpis:s}=e.results;return s.sharpe<1?{canPromote:!1,reason:"Sharpe ratio ".concat(s.sharpe.toFixed(2)," below minimum (1.0)")}:s.maxDDPct<-.25?{canPromote:!1,reason:"Max drawdown ".concat((100*s.maxDDPct).toFixed(1),"% exceeds limit (-25%)")}:s.hitRate<.55?{canPromote:!1,reason:"Hit rate ".concat((100*s.hitRate).toFixed(1),"% below minimum (55%)")}:{canPromote:!0}}static formatKpi(e,t){switch(t){case"percentage":return"".concat((100*e).toFixed(2),"%");case"ratio":return e.toFixed(3);case"count":return Math.round(e).toLocaleString();case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);default:return e.toString()}}}let B={"etf-spike":{name:"ETF Spike Strategy",description:"Captures large ETF inflow events",agents:["OF-1"],rules:[{expr:"etf.flow.usd > 150e6",weight:1,description:"Large ETF inflows above $150M"}],benchmark:"BTC"},"tvl-momentum":{name:"TVL Momentum Strategy",description:"Follows total value locked growth trends",agents:["OC-1"],rules:[{expr:"tvl.change7d > 0",weight:1,description:"Positive TVL growth over 7 days"}],benchmark:"ETH"},"negative-funding":{name:"Negative Funding Basis Strategy",description:"Exploits negative funding rate environments",agents:["DV-1"],rules:[{expr:"funding.rate < 0",weight:1,description:"Negative funding rates indicate bullish sentiment"}],benchmark:"BTC"}},A=[{code:"NM-1",name:"News & Market Sentiment",description:"Social sentiment and news analysis"},{code:"OF-1",name:"ETF Flows",description:"Spot ETF inflow/outflow tracking"},{code:"OC-1",name:"On-Chain Analytics",description:"DeFi TVL and on-chain metrics"},{code:"DV-1",name:"Derivatives Volume",description:"Futures and options analysis"},{code:"DV-2",name:"Derivatives Structure",description:"Gamma and options flow"},{code:"MX-1",name:"Market Microstructure",description:"Order book and execution analytics"}],E=[{code:"BTC",name:"Bitcoin",description:"Bitcoin price performance"},{code:"ETH",name:"Ethereum",description:"Ethereum price performance"},{code:"NAV",name:"Cash/NAV",description:"Flat benchmark (no market exposure)"}];function F(e){let{onSelect:t,selectedId:s}=e,[n,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),h=async()=>{try{o(!0),d(null);let e=await P.listBacktests({limit:20,orderBy:"created_at",orderDir:"DESC"});if(e.success&&e.backtests)i(e.backtests);else throw Error(e.error||"Failed to load backtests")}catch(e){console.error("Load backtests error:",e),d(e instanceof S?e.message:"Failed to load backtests")}finally{o(!1)}},p=async e=>{if(t)try{let s=await P.getBacktest(e.id);if(s.success&&s.backtest)t(s.backtest);else throw Error(s.error||"Failed to load backtest details")}catch(e){console.error("Load backtest details error:",e),t(null)}},f=(e,t)=>void 0===e?"-":"percentage"===t?"".concat((100*e).toFixed(2),"%"):e.toFixed(3);return((0,r.useEffect)(()=>{h()},[]),l)?(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Recent Backtests"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(k.A,{className:"h-6 w-6 animate-spin"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading backtests..."})]})})]}):c?(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Recent Backtests"]}),(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:h,children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsxs)("div",{className:"text-center py-8 text-destructive",children:[(0,a.jsx)("p",{children:"Error loading backtests:"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:c})]})})]}):(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Recent Backtests (",n.length,")"]}),(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:h,children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,a.jsx)(x.Wu,{children:0===n.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg mb-2",children:"No backtests yet"}),(0,a.jsx)("p",{children:"Create your first backtest using the configuration panel"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(R.XI,{children:[(0,a.jsx)(R.A0,{children:(0,a.jsxs)(R.Hj,{children:[(0,a.jsx)(R.nd,{children:"Name"}),(0,a.jsx)(R.nd,{children:"Status"}),(0,a.jsx)(R.nd,{children:"Created"}),(0,a.jsx)(R.nd,{children:"Benchmark"}),(0,a.jsx)(R.nd,{children:"Agents"}),(0,a.jsx)(R.nd,{children:"PnL"}),(0,a.jsx)(R.nd,{children:"Sharpe"}),(0,a.jsx)(R.nd,{children:"Max DD"})]})}),(0,a.jsx)(R.BF,{children:n.map(e=>{var t;return(0,a.jsxs)(R.Hj,{className:"cursor-pointer hover:bg-muted/50 ".concat(s===e.id?"bg-muted":""),onClick:()=>p(e),children:[(0,a.jsx)(R.nA,{className:"font-medium",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]})]})}),(0,a.jsx)(R.nA,{children:(t=e.status,(0,a.jsx)(N.E,{variant:{queued:"outline",running:"secondary",done:"default",failed:"destructive"}[t]||"outline",children:t}))}),(0,a.jsx)(R.nA,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(C.A,{className:"h-3 w-3"}),new Date(e.createdAt).toLocaleDateString()]})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)(N.E,{variant:"outline",children:e.benchmark})}),(0,a.jsx)(R.nA,{children:(0,a.jsxs)("div",{className:"text-sm",children:[e.agentCount," agents"]})}),(0,a.jsx)(R.nA,{children:(0,a.jsx)("span",{className:"font-medium ".concat(e.pnlPct&&e.pnlPct>0?"text-green-600":e.pnlPct&&e.pnlPct<0?"text-red-600":""),children:f(e.pnlPct,"percentage")})}),(0,a.jsx)(R.nA,{children:f(e.sharpe,"ratio")}),(0,a.jsx)(R.nA,{children:(0,a.jsx)("span",{className:e.maxDDPct?"text-red-600":"",children:f(e.maxDDPct,"percentage")})})]},e.id)})})]})})})]})}var T=s(14967),z=s(37195),L=s(14753),O=s(93038),M=s(4697),I=s(66717),K=s(18928),_=s(17571);function V(e){var t,s;let{data:r}=e;if(!r||0===r.length)return(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Equity Curve"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No equity data available"})})]});let n=r.map(e=>({date:new Date(e.ts).toLocaleDateString(),timestamp:e.ts,strategy:e.strat,benchmark:e.bench,strategyPct:((e.strat-1)*100).toFixed(2),benchmarkPct:((e.bench-1)*100).toFixed(2)})),i=(null==(t=n[n.length-1])?void 0:t.strategyPct)||"0",l=(null==(s=n[n.length-1])?void 0:s.benchmarkPct)||"0",o=(parseFloat(i)-parseFloat(l)).toFixed(2);return(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Equity Curve"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsxs)("span",{children:["Strategy: ",i,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),(0,a.jsxs)("span",{children:["Benchmark: ",l,"%"]})]}),(0,a.jsxs)("div",{className:"font-medium ".concat(parseFloat(o)>=0?"text-green-600":"text-red-600"),children:["Excess: ",o,"%"]})]})]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(z.b,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(L.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,a.jsx)(O.W,{dataKey:"date",tick:{fontSize:12},interval:"preserveStartEnd"}),(0,a.jsx)(M.h,{tick:{fontSize:12},domain:["dataMin - 0.01","dataMax + 0.01"],tickFormatter:e=>"".concat(((e-1)*100).toFixed(1),"%")}),(0,a.jsx)(I.m,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:r}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-background border rounded-lg shadow-md p-3",children:[(0,a.jsx)("p",{className:"font-medium",children:r}),(0,a.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-sm",children:["Strategy: ",e.strategyPct,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),(0,a.jsxs)("span",{className:"text-sm",children:["Benchmark: ",e.benchmarkPct,"%"]})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:["Excess: ",(parseFloat(e.strategyPct)-parseFloat(e.benchmarkPct)).toFixed(2),"%"]})]})]})}return null},{})}),(0,a.jsx)(K.s,{}),(0,a.jsx)(_.N,{type:"monotone",dataKey:"strategy",stroke:"#3b82f6",strokeWidth:2,name:"Strategy",dot:!1,activeDot:{r:4}}),(0,a.jsx)(_.N,{type:"monotone",dataKey:"benchmark",stroke:"#6b7280",strokeWidth:2,name:"Benchmark",dot:!1,activeDot:{r:4}})]})})})})]})}var q=s(2504),J=s(76327);function Z(e){let{data:t}=e;if(!t||0===t.length)return(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"Monthly Performance"]})}),(0,a.jsx)(x.Wu,{children:(0,a.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No monthly data available"})})]});let s=t.map(e=>{let[t,s]=e.ym.split("-"),a=new Date(parseInt(t),parseInt(s)-1).toLocaleDateString("en-US",{month:"short"});return{month:"".concat(a," ").concat(t),ym:e.ym,pnl:100*e.pnlPct,pnlFormatted:"".concat((100*e.pnlPct).toFixed(2),"%"),fill:e.pnlPct>=0?"#16a34a":"#dc2626"}}),r=s.filter(e=>e.pnl>0).length,n=s.filter(e=>e.pnl<0).length,i=s.length>0?(r/s.length*100).toFixed(1):"0",l=s.reduce((e,t)=>t.pnl>e.pnl?t:e,s[0]),o=s.reduce((e,t)=>t.pnl<e.pnl?t:e,s[0]);return(0,a.jsxs)(x.Zp,{children:[(0,a.jsx)(x.aR,{children:(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"Monthly Performance"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-green-600",children:["Positive: ",r]}),(0,a.jsxs)("div",{className:"text-red-600",children:["Negative: ",n]}),(0,a.jsxs)("div",{className:"font-medium",children:["Win Rate: ",i,"%"]})]})]})}),(0,a.jsxs)(x.Wu,{children:[(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(T.u,{width:"100%",height:"100%",children:(0,a.jsxs)(q.E,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(L.d,{strokeDasharray:"3 3",className:"opacity-30"}),(0,a.jsx)(O.W,{dataKey:"month",tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),(0,a.jsx)(M.h,{tick:{fontSize:12},tickFormatter:e=>"".concat(e.toFixed(1),"%")}),(0,a.jsx)(I.m,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:r}=e;if(t&&s&&s.length){let e=s[0].payload;return(0,a.jsxs)("div",{className:"bg-background border rounded-lg shadow-md p-3",children:[(0,a.jsx)("p",{className:"font-medium",children:r}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.fill}}),(0,a.jsxs)("span",{className:"text-sm",children:["Monthly PnL: ",e.pnlFormatted]})]})]})}return null},{})}),(0,a.jsx)(J.y,{dataKey:"pnl",name:"Monthly PnL (%)",radius:[2,2,0,0]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Best Month"}),(0,a.jsxs)("div",{className:"font-semibold text-green-600",children:[null==l?void 0:l.pnlFormatted," (",null==l?void 0:l.month,")"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Worst Month"}),(0,a.jsxs)("div",{className:"font-semibold text-red-600",children:[null==o?void 0:o.pnlFormatted," (",null==o?void 0:o.month,")"]})]})]})]})]})}var W=s(81695),H=s(27609);let U="adaf-research-snapshots";function $(){try{let e=localStorage.getItem(U);if(!e)return[];let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.warn("Failed to load snapshots from localStorage:",e),[]}}function X(e){try{let t=e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,50);localStorage.setItem(U,JSON.stringify(t))}catch(e){console.warn("Failed to save snapshots to localStorage:",e)}}var G=s(49920),Q=s(14350),Y=s(62046),ee=s(82499),et=s(75825),es=s(98181),ea=s(95479),er=s(75302);function en(e,t){switch(t){case"percent":return"".concat((100*e).toFixed(2),"%");case"ratio":return e.toFixed(3);case"number":return e.toLocaleString();default:return e.toString()}}function ei(e){let{snapshot:t,isBaseline:s=!1,baselineSnapshot:r,onLoadConfig:n,onTogglePin:i}=e;return(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsxs)(x.Zp,{className:(0,v.cn)("h-full",s&&"ring-2 ring-blue-500 ring-opacity-50"),children:[(0,a.jsx)(x.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-sm truncate",title:t.name,children:t.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,G.m)(new Date(t.createdAt),{addSuffix:!0})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[s&&(0,a.jsx)(N.E,{variant:"secondary",className:"text-xs",children:"Baseline"}),(0,a.jsx)(u.$,{variant:"ghost",size:"sm",onClick:()=>null==i?void 0:i(t.id,!t.isPinned),className:"h-6 w-6 p-0",children:t.isPinned?(0,a.jsx)(et.A,{className:"h-3 w-3"}):(0,a.jsx)(es.A,{className:"h-3 w-3"})})]})]}),t.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map(e=>(0,a.jsx)(N.E,{variant:"outline",className:"text-xs",children:e},e)),t.tags.length>3&&(0,a.jsxs)(N.E,{variant:"outline",className:"text-xs",children:["+",t.tags.length-3]})]}),(0,a.jsx)("div",{className:"flex gap-1",children:(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:()=>null==n?void 0:n(t.config),className:"h-7 text-xs",children:[(0,a.jsx)(ea.A,{className:"h-3 w-3 mr-1"}),"Load Config"]})})]})}),(0,a.jsx)(x.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,a.jsx)(el,{label:"Total Return",value:en(t.results.pnlPercent,"percent"),baseline:null==r?void 0:r.results.pnlPercent,current:t.results.pnlPercent,betterIsHigher:!0}),(0,a.jsx)(el,{label:"Sharpe",value:en(t.results.sharpe,"ratio"),baseline:null==r?void 0:r.results.sharpe,current:t.results.sharpe,betterIsHigher:!0}),(0,a.jsx)(el,{label:"Max DD",value:en(t.results.maxDrawdown,"percent"),baseline:null==r?void 0:r.results.maxDrawdown,current:t.results.maxDrawdown,betterIsHigher:!1}),(0,a.jsx)(el,{label:"Hit Rate",value:en(t.results.hitRate,"percent"),baseline:null==r?void 0:r.results.hitRate,current:t.results.hitRate,betterIsHigher:!0})]}),(0,a.jsxs)("div",{className:"h-16 bg-gray-50 rounded border flex items-center justify-center text-xs text-gray-500",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Equity Curve"]})]})})]})})}function el(e){let{label:t,value:s,baseline:r,current:n,betterIsHigher:i=!0}=e,l=void 0!==r?function(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=e-t;return Math.abs(a)<.01*Math.abs(t)?{icon:Q.A,color:"text-gray-500",label:"equal"}:(s?a<0:a>0)?{icon:Y.A,color:"text-red-500",label:"worse"}:{icon:ee.A,color:"text-green-500",label:"better"}}(n,r,i):null;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:t}),l&&(0,a.jsx)(l.icon,{className:(0,v.cn)("h-3 w-3",l.color)})]}),(0,a.jsx)("div",{className:"font-medium text-sm",children:s})]})}function eo(e){let{snapshots:t,onLoadConfig:s,trigger:n,open:i,onOpenChange:l}=e,[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)("overview"),f=l||c,g=t||(()=>{try{return JSON.parse(localStorage.getItem("adaf-research-snapshots")||"[]")}catch(e){return[]}})(),b=(0,r.useMemo)(()=>{var e;let t=g.find(e=>e.isPinned);return(null==t?void 0:t.id)||(null==(e=g[0])?void 0:e.id)||""},[g]),j=m||b,N=function(e){let t=e.map(e=>$().find(t=>t.id===e)||null).filter(e=>null!==e);return 0===t.length?null:{snapshots:t,metrics:[{metric:"pnlPercent",label:"Total Return",format:"percent"},{metric:"sharpe",label:"Sharpe Ratio",format:"ratio"},{metric:"maxDrawdown",label:"Max Drawdown",format:"percent"},{metric:"hitRate",label:"Hit Rate",format:"percent"},{metric:"volatility",label:"Volatility",format:"percent"},{metric:"totalTrades",label:"Total Trades",format:"number"},{metric:"winRate",label:"Win Rate",format:"percent"},{metric:"profitFactor",label:"Profit Factor",format:"ratio"},{metric:"calmarRatio",label:"Calmar Ratio",format:"ratio"},{metric:"sortinoRatio",label:"Sortino Ratio",format:"ratio"}]}}(g.map(e=>e.id)),y=async(e,t)=>{!function(e,t){var s,a;let r=$(),n=r.findIndex(t=>t.id===e);-1!==n&&(r[n]={...r[n],...t,name:(null==(s=t.name)?void 0:s.trim())||r[n].name,tags:(null==(a=t.tags)?void 0:a.map(e=>e.trim()).filter(Boolean))||r[n].tags},X(r),(0,H.dB)("Research","SnapshotUpdate",{snapshotId:e,updates:Object.keys(t)}))}(e,{isPinned:t})},k=g.find(e=>e.id===j);return 0===g.length?(0,a.jsxs)(u.$,{variant:"outline",disabled:!0,children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Compare (No Snapshots)"]}):(0,a.jsxs)(W.cj,{open:void 0!==i?i:o,onOpenChange:f,children:[(0,a.jsx)(W.CG,{asChild:!0,children:n||(0,a.jsxs)(u.$,{variant:"outline",onClick:()=>{f(!0),(0,H.dB)("Research","CompareOpen",{snapshotCount:g.length})},children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Compare (",g.length,")"]})}),(0,a.jsxs)(W.h,{className:"w-full sm:max-w-4xl",children:[(0,a.jsxs)(W.Fm,{children:[(0,a.jsxs)(W.qp,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"Backtest Comparison"]}),(0,a.jsxs)(W.Qs,{children:["Compare ",g.length," research snapshots side by side"]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Baseline:"}),(0,a.jsx)("select",{value:j,onChange:e=>x(e.target.value),className:"text-sm border rounded px-2 py-1",children:g.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:()=>{if(!N)return;let e=new Blob([JSON.stringify({comparison:{timestamp:new Date().toISOString(),baseline:j,snapshots:N.snapshots.map(e=>({id:e.id,name:e.name,createdAt:e.createdAt,results:e.results}))}},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="backtest-comparison-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),(0,H.dB)("Research","CompareExport",{snapshotCount:g.length,baseline:j})},children:[(0,a.jsx)(er.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),(0,a.jsxs)(w.tU,{value:h,onValueChange:p,children:[(0,a.jsxs)(w.j7,{children:[(0,a.jsx)(w.Xi,{value:"overview",children:"Overview"}),(0,a.jsx)(w.Xi,{value:"detailed",children:"Detailed Metrics"}),(0,a.jsx)(w.Xi,{value:"config",children:"Configuration Diff"})]}),(0,a.jsx)(w.av,{value:"overview",className:"mt-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(e=>(0,a.jsx)(ei,{snapshot:e,isBaseline:e.id===j,baselineSnapshot:k,onLoadConfig:s,onTogglePin:y},e.id))})}),(0,a.jsx)(w.av,{value:"detailed",className:"mt-4",children:N&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left p-2",children:"Metric"}),N.snapshots.map(e=>(0,a.jsx)("th",{className:"text-center p-2 min-w-[120px]",children:(0,a.jsx)("div",{className:"truncate",title:e.name,children:e.name})},e.id))]})}),(0,a.jsx)("tbody",{children:N.metrics.map(e=>{let{metric:t,label:s,format:r}=e;return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-2 font-medium",children:s}),N.snapshots.map(e=>{let s=e.results[t],n=e.id===j;return(0,a.jsx)("td",{className:(0,v.cn)("p-2 text-center",n&&"bg-blue-50 font-medium"),children:en(s,r)},e.id)})]},t)})})]})})})}),(0,a.jsx)(w.av,{value:"config",className:"mt-4",children:(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(ea.A,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Configuration diff view"}),(0,a.jsx)("p",{className:"text-xs",children:"Coming soon - side-by-side DSL rules comparison"})]})})]})]})]})]})}function ec(){var e,t,s,b,v,k,C;let[R,D]=(0,r.useState)({name:"",agents:[],rules:[{expr:"",weight:1,description:""}],window:{from:new Date(Date.now()-7776e6).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]},benchmark:"BTC",sizing:{notionalPctNAV:.1},feesBps:5,slippageBps:3,rebalanceDays:1}),[T,z]=(0,r.useState)(!1),[L,O]=(0,r.useState)(!1),[M,I]=(0,r.useState)(!1),[K,_]=(0,r.useState)(null),[q,J]=(0,r.useState)([]),[W,U]=(0,r.useState)(0),[G,Q]=(0,r.useState)(!1),[Y,ee]=(0,r.useState)(!1);(0,r.useEffect)(()=>{var e,t;if(R.name||(null==(e=R.agents)?void 0:e.length)||(null==(t=R.rules)?void 0:t.some(e=>e.expr))){let{valid:e,errors:t}=P.validateConfig(R);J(e?[]:t)}else J([])},[R]);let et=(e,t,s)=>{D(a=>{var r;return{...a,rules:(null==(r=a.rules)?void 0:r.map((a,r)=>r===e?{...a,[t]:s}:a))||[]}})},es=async()=>{try{z(!0);let e=await P.createBacktest({config:R,actor:"ui@adaf.com"});if(e.success&&e.id)n.oR.success("Backtest creado #".concat(e.id,": ").concat(R.name)),U(e=>e+1);else throw Error(e.error||"Error al crear backtest")}catch(t){console.error("Error crear backtest:",t);let e=t instanceof S?t.message:"Error al crear backtest";n.oR.error(e)}finally{z(!1)}},ea=async()=>{if(!K)return void n.oR.error("Please select a backtest to run");try{O(!0);let e={id:K.id,actor:"ui@adaf.com"};n.oR.loading("Running backtest...",{id:"backtest-run"});let t=await P.runBacktest(e);if(t.success&&"done"===t.status){n.oR.success("Backtest completed in ".concat((t.durationMs||0)/1e3,"s"),{id:"backtest-run"});let e=await P.getBacktest(K.id);e.success&&e.backtest&&_(e.backtest),U(e=>e+1)}else throw Error(t.errorMessage||t.error||"Backtest execution failed")}catch(t){console.error("Run backtest error:",t);let e=t instanceof S?t.message:"Error al ejecutar backtest";n.oR.error(e,{id:"backtest-run"})}finally{O(!1)}},er=async()=>{if(K)try{I(!0);let e={backtestId:K.id,name:"".concat(K.name," - OP-X Strategy"),description:"Promoted from successful backtest: ".concat(K.name),actor:"ui@adaf.com"},t=await P.promoteBacktest(e);if(t.success&&t.opportunity)n.oR.success("Oportunidad OP-X creada: ".concat(t.opportunity.id));else throw Error(t.error||"Error al promover backtest")}catch(t){console.error("Promote backtest error:",t);let e=t instanceof S?t.message:"Error al promover backtest";n.oR.error(e)}finally{I(!1)}},en=async()=>{if(!(null==K?void 0:K.results))return void n.oR.error("No hay resultados de backtest para capturar");try{var e;ee(!0);let t=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r={id:"snap_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:e.trim()||"Snapshot ".concat(new Date().toLocaleDateString()),createdAt:new Date().toISOString(),config:t,results:s,tags:a.map(e=>e.trim()).filter(Boolean)};return X([r,...$()].slice(0,50)),(0,H.dB)("Research","SnapshotCreate",{snapshotId:r.id,tags:r.tags,pnl:s.pnlPercent}),r}(K.name,{agents:K.config.agents,rules:K.config.rules.map(e=>({id:"rule_".concat(Math.random().toString(36).substr(2,9)),expression:e.expr,weight:e.weight||1,enabled:!0})),tradingParams:{maxPositionSize:(null==(e=K.config.sizing)?void 0:e.notionalPctNAV)||.1,slippageBps:K.config.slippageBps||3,feesBps:K.config.feesBps||5,timeframe:"".concat(K.config.rebalanceDays||1,"d"),lookback:"".concat(Math.ceil((new Date(K.config.window.to).getTime()-new Date(K.config.window.from).getTime())/864e5),"d")},riskParams:{maxDrawdown:Math.abs(K.results.kpis.maxDDPct),stopLoss:.05,positionSizing:"equal_weight"}},{pnlPercent:K.results.kpis.pnlPct,sharpe:K.results.kpis.sharpe,maxDrawdown:Math.abs(K.results.kpis.maxDDPct),hitRate:K.results.kpis.hitRate,volatility:K.results.kpis.volPct,totalTrades:K.results.kpis.trades,winRate:K.results.kpis.hitRate,avgWin:0,avgLoss:0,profitFactor:0,calmarRatio:0,sortinoRatio:0},["backtest",K.config.benchmark.toLowerCase()]);n.oR.success('Snapshot "'.concat(t.name,'" creado exitosamente'))}catch(e){console.error("Create snapshot error:",e),n.oR.error("Failed to create snapshot")}finally{ee(!1)}},ei=K?P.canPromote(K):{canPromote:!1};return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,a.jsx)("div",{className:"lg:col-span-1 space-y-6",children:(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{children:[(0,a.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),"Strategy Configuration"]}),(0,a.jsx)(x.BT,{children:"Design and configure your backtesting strategy"})]}),(0,a.jsxs)(x.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(p.J,{children:"Plantillas de Inicio R\xe1pido"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 mt-2",children:Object.entries(B).map(e=>{let[t,s]=e;return(0,a.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>(e=>{let t=B[e];D(e=>({...e,name:t.name,agents:t.agents,rules:t.rules,benchmark:t.benchmark})),n.oR.success("Se aplic\xf3 preset ".concat(t.name))})(t),className:"justify-start text-sm",children:s.name},t)})})]}),(0,a.jsx)(y.w,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(p.J,{htmlFor:"name",children:"Nombre de la Estrategia"}),(0,a.jsx)(h.p,{id:"name",value:R.name||"",onChange:e=>D(t=>({...t,name:e.target.value})),placeholder:"Mi Estrategia de Trading"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.J,{htmlFor:"from-date",children:"Rango de Fechas"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,a.jsx)(h.p,{id:"from-date",type:"date",value:(null==(t=R.window)||null==(e=t.from)?void 0:e.split("T")[0])||"",onChange:e=>D(t=>({...t,window:{...t.window,from:e.target.value}}))}),(0,a.jsx)(h.p,{type:"date",value:(null==(b=R.window)||null==(s=b.to)?void 0:s.split("T")[0])||"",onChange:e=>D(t=>({...t,window:{...t.window,to:e.target.value}}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.J,{children:"Agentes de Se\xf1al"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-1 mt-2",children:A.map(e=>{var t,s;return(0,a.jsx)("div",{className:"p-2 rounded border cursor-pointer transition-colors ".concat((null==(t=R.agents)?void 0:t.includes(e.code))?"bg-primary/10 border-primary":"border-border hover:bg-muted"),onClick:()=>{var t;return t=e.code,void D(e=>{var s;return{...e,agents:(null==(s=e.agents)?void 0:s.includes(t))?e.agents.filter(e=>e!==t):[...e.agents||[],t]}})},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.code}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.name})]}),(null==(s=R.agents)?void 0:s.includes(e.code))&&(0,a.jsx)(N.E,{variant:"secondary",children:"Seleccionado"})]})},e.code)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(p.J,{htmlFor:"benchmark",children:"Benchmark"}),(0,a.jsxs)(g.l6,{value:R.benchmark,onValueChange:e=>D(t=>({...t,benchmark:e})),children:[(0,a.jsx)(g.bq,{children:(0,a.jsx)(g.yv,{})}),(0,a.jsx)(g.gC,{children:E.map(e=>(0,a.jsxs)(g.eb,{value:e.code,children:[e.name," - ",e.description]},e.code))})]})]})]}),(0,a.jsx)(y.w,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(p.J,{children:"Reglas de Estrategia"}),(0,a.jsx)(u.$,{size:"sm",variant:"outline",onClick:()=>{D(e=>({...e,rules:[...e.rules||[],{expr:"",weight:1,description:""}]}))},children:"Agregar Regla"})]}),null==(v=R.rules)?void 0:v.map((e,t)=>(0,a.jsx)(x.Zp,{children:(0,a.jsxs)(x.Wu,{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(p.J,{className:"text-sm",children:["Regla ",t+1]}),R.rules&&R.rules.length>1&&(0,a.jsx)(u.$,{size:"sm",variant:"ghost",onClick:()=>{R.rules&&R.rules.length>1&&D(e=>{var s;return{...e,rules:(null==(s=e.rules)?void 0:s.filter((e,s)=>s!==t))||[]}})},className:"text-xs",children:"Eliminar"})]}),(0,a.jsx)(f.T,{value:e.expr,onChange:e=>et(t,"expr",e.target.value),placeholder:"etf.flow.usd > 100e6 AND tvl.change7d > 0",className:"font-mono text-sm",rows:2}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(p.J,{className:"text-xs",children:["Peso: ",e.weight]}),(0,a.jsx)(j,{value:[e.weight||1],onValueChange:e=>{let[s]=e;return et(t,"weight",s)},min:.1,max:5,step:.1,className:"mt-1"})]})]})},t)),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("p",{children:"Example DSL:"}),(0,a.jsx)("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:"etf.flow.usd > 150e6"}),(0,a.jsx)("br",{}),(0,a.jsx)("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:"funding.rate < 0 AND gamma.exposure > 50e6"})]})]}),(0,a.jsx)(y.w,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(p.J,{children:"Trading Parameters"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(p.J,{className:"text-sm",children:["Tama\xf1o de Posici\xf3n: ",100*((null==(k=R.sizing)?void 0:k.notionalPctNAV)||.1),"%"]}),(0,a.jsx)(j,{value:[100*((null==(C=R.sizing)?void 0:C.notionalPctNAV)||.1)],onValueChange:e=>{let[t]=e;return D(e=>({...e,sizing:{notionalPctNAV:t/100}}))},min:1,max:100,step:1,className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(p.J,{className:"text-sm",children:["Fees: ",R.feesBps||5," bps"]}),(0,a.jsx)(j,{value:[R.feesBps||5],onValueChange:e=>{let[t]=e;return D(e=>({...e,feesBps:t}))},min:0,max:200,step:1,className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(p.J,{className:"text-sm",children:["Slippage: ",R.slippageBps||3," bps"]}),(0,a.jsx)(j,{value:[R.slippageBps||3],onValueChange:e=>{let[t]=e;return D(e=>({...e,slippageBps:t}))},min:0,max:100,step:1,className:"mt-1"})]})]}),(0,a.jsx)(y.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[q.length>0&&(0,a.jsx)("div",{className:"text-sm text-destructive space-y-1",children:q.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(l.A,{className:"h-3 w-3"}),e]},t))}),(0,a.jsx)(u.$,{onClick:es,disabled:T||q.length>0,className:"w-full",children:T?"Creando...":"Crear Backtest"}),(0,a.jsxs)(u.$,{onClick:ea,disabled:L||!K||"queued"!==K.status,variant:"secondary",className:"w-full",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),L?"Ejecutando...":"Ejecutar Seleccionado"]})]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,a.jsxs)(w.tU,{defaultValue:"results",className:"h-full",children:[(0,a.jsxs)(w.j7,{children:[(0,a.jsx)(w.Xi,{value:"results",children:"Resultados y Gr\xe1ficos"}),(0,a.jsx)(w.Xi,{value:"backtests",children:"Todos los Backtests"})]}),(0,a.jsx)(w.av,{value:"results",className:"space-y-6",children:K?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(x.Zp,{children:[(0,a.jsxs)(x.aR,{children:[(0,a.jsxs)(x.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:K.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.E,{variant:"done"===K.status?"default":"running"===K.status?"secondary":"failed"===K.status?"destructive":"outline",children:K.status}),K.results&&"done"===K.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.$,{size:"sm",variant:"outline",onClick:en,disabled:Y,className:"ml-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),Y?"Creando...":"Snapshot"]}),(0,a.jsxs)(u.$,{size:"sm",variant:"outline",onClick:()=>{if(0===$().length)return void n.oR.error("No snapshots available for comparison");Q(!0)},className:"ml-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Comparar"]})]}),ei.canPromote&&(0,a.jsxs)(u.$,{size:"sm",onClick:er,disabled:M,className:"ml-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),M?"Promoviendo...":"Promover a OP-X"]})]})]}),(0,a.jsxs)(x.BT,{children:["Creado ",new Date(K.createdAt).toLocaleDateString()," •",K.config.agents.join(", ")," • benchmark ",K.config.benchmark]})]}),K.results&&(0,a.jsxs)(x.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-muted rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P.formatKpi(K.results.kpis.pnlPct,"percentage")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Return Total"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P.formatKpi(K.results.kpis.sharpe,"ratio")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Sharpe Ratio"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P.formatKpi(K.results.kpis.maxDDPct,"percentage")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Drawdown M\xe1ximo"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P.formatKpi(K.results.kpis.hitRate,"percentage")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Hit Rate"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P.formatKpi(K.results.kpis.vsBenchmarkPct,"percentage")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"vs Benchmark"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(V,{data:K.results.equity}),(0,a.jsx)(Z,{data:K.results.monthlyPnL})]}),K.results.notes&&K.results.notes.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded",children:[(0,a.jsx)("h4",{className:"font-medium text-amber-800 mb-2",children:"Notas y Advertencias"}),(0,a.jsx)("ul",{className:"text-sm text-amber-700 space-y-1",children:K.results.notes.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-3 w-3"}),e]},t))})]}),!ei.canPromote&&ei.reason&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Requisitos de Promoci\xf3n"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:ei.reason})]})]})]})}):(0,a.jsx)(x.Zp,{children:(0,a.jsxs)(x.Wu,{className:"p-12 text-center text-muted-foreground",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg mb-2",children:"Ning\xfan backtest seleccionado"}),(0,a.jsx)("p",{children:"Selecciona un backtest de la lista para ver resultados y gr\xe1ficos"})]})})}),(0,a.jsx)(w.av,{value:"backtests",children:(0,a.jsx)(F,{onSelect:_,selectedId:null==K?void 0:K.id},W)})]})}),(0,a.jsx)(eo,{open:G,onOpenChange:Q})]})}},27609:(e,t,s)=>{"use strict";s.d(t,{dB:()=>m,vC:()=>u});var a=s(59693),r=s(83738);let n=navigator.platform.toUpperCase().indexOf("MAC")>=0,i=n?"⌘":"Ctrl",l=n?"metaKey":"ctrlKey",o=[{key:"k",modifiers:[l],description:"Open Spotlight Search",action:"spotlight:open",preventDefault:!0},{key:"j",modifiers:[l],description:"Toggle Theme",action:"theme:toggle",preventDefault:!0},{key:"r",modifiers:[l],description:"Run Worker (with confirmation)",action:"worker:run",preventDefault:!0},{key:"?",modifiers:[],description:"Show Keyboard Shortcuts Help",action:"help:shortcuts",preventDefault:!0},{key:"g",modifiers:[],description:"Go to... (press g then:",action:"goto:prepare",context:"global"},{key:"1",modifiers:[l],description:"Focus Top Strip (KPIs)",action:"focus:kpi-strip",preventDefault:!0},{key:"2",modifiers:[l],description:"Focus ETF Autoswitch Card",action:"focus:etf-card",preventDefault:!0},{key:"3",modifiers:[l],description:"Focus Research Card",action:"focus:research-card",preventDefault:!0},{key:"4",modifiers:[l],description:"Focus OP-X Card",action:"focus:opx-card",preventDefault:!0},{key:"5",modifiers:[l],description:"Focus Reports Card",action:"focus:reports-card",preventDefault:!0},{key:"6",modifiers:[l],description:"Focus Risk Card",action:"focus:risk-card",preventDefault:!0},{key:"7",modifiers:[l],description:"Focus DQP Card",action:"focus:dqp-card",preventDefault:!0}],c=[{key:"Enter",modifiers:[l],description:"Run Backtest",action:"research:run",context:"research",preventDefault:!0},{key:"s",modifiers:[l],description:"Save Config Preset",action:"research:save",context:"research",preventDefault:!0},{key:"c",modifiers:["shiftKey"],description:"Create Snapshot",action:"research:snapshot",context:"research",preventDefault:!0}],d={m:{route:"/markets",description:"Markets"},o:{route:"/onchain",description:"On-Chain Analytics"},d:{route:"/derivatives",description:"Derivatives"},n:{route:"/news",description:"News & Research"},r:{route:"/research",description:"Research Hub"},a:{route:"/academy",description:"Academy"},x:{route:"/opx",description:"OP-X Opportunities"},p:{route:"/reports",description:"Reports"},q:{route:"/dqp",description:"Data Quality"},l:{route:"/lineage",description:"Data Lineage"},c:{route:"/control",description:"Control Panel"},h:{route:"/",description:"Home Dashboard"}},m=(e,t,s)=>{try{fetch("/api/metrics/ui/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:e,action:t,context:s,timestamp:new Date().toISOString()})}).catch(()=>{})}catch(e){}};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",t=arguments.length>1?arguments[1]:void 0,s=(0,r.useRouter)(),n=(0,a.useRef)(!1),l=(0,a.useRef)(null),u=(0,a.useCallback)(()=>{let e=document.activeElement;if(!e)return!1;let t=e.tagName.toLowerCase(),s="true"===e.getAttribute("contenteditable");return["input","textarea","select"].includes(t)||s},[]),x=(0,a.useCallback)((s,a)=>{var r,i,o,c,d,u,x;switch(m("Hotkey",s,{context:e,data:a}),s){case"spotlight:open":window.dispatchEvent(new CustomEvent("spotlight:open"));break;case"theme:toggle":window.dispatchEvent(new CustomEvent("theme:toggle"));break;case"worker:run":window.confirm("Run background worker once? This may affect system performance briefly.")&&fetch("/api/ops/worker/run",{method:"POST"}).then(()=>{}).catch(()=>{alert("Failed to run worker. Check console for details.")});break;case"help:shortcuts":window.dispatchEvent(new CustomEvent("help:show",{detail:"shortcuts"}));break;case"goto:prepare":n.current=!0,l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{n.current=!1},2e3);break;case"focus:kpi-strip":null==(r=document.getElementById("kpi-strip"))||r.focus();break;case"focus:etf-card":null==(i=document.getElementById("etf-autoswitch-card"))||i.focus();break;case"focus:research-card":null==(o=document.getElementById("research-card"))||o.focus();break;case"focus:opx-card":null==(c=document.getElementById("opx-card"))||c.focus();break;case"focus:reports-card":null==(d=document.getElementById("reports-card"))||d.focus();break;case"focus:risk-card":null==(u=document.getElementById("risk-card"))||u.focus();break;case"focus:dqp-card":null==(x=document.getElementById("dqp-card"))||x.focus();break;default:null==t||t(s,a)}},[t,e]),h=(0,a.useCallback)(t=>{if(u())return;let a=t.key.toLowerCase();if(n.current){let e=d[a];if(e){t.preventDefault(),n.current=!1,l.current&&clearTimeout(l.current),m("Navigation","Goto",{route:e.route,key:a}),s.push(e.route);return}n.current=!1;return}for(let s of[...o,..."research"===e?c:[]])if(s.key.toLowerCase()===a){let e=s.modifiers.every(e=>{switch(e){case"ctrlKey":return t.ctrlKey;case"metaKey":return t.metaKey;case"altKey":return t.altKey;case"shiftKey":return t.shiftKey;default:return!1}}),a=(s.modifiers.includes("ctrlKey")?0:+!!t.ctrlKey)+(s.modifiers.includes("metaKey")?0:+!!t.metaKey)+(s.modifiers.includes("altKey")?0:+!!t.altKey)+(s.modifiers.includes("shiftKey")?0:+!!t.shiftKey);if(e&&0===a){s.preventDefault&&t.preventDefault(),x(s.action);break}}},[u,x,s,e]);return(0,a.useEffect)(()=>(document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h),l.current&&clearTimeout(l.current)}),[h]),(0,a.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[]),{executeAction:x,modifierKey:i,isGotoMode:n.current}}},33399:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(51833);s(59693);var r=s(49639),n=s(81429);let i=(0,r.F)("inline-flex items-center rounded-full border border-amber-300/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-amber-100 shadow-[0_12px_30px_-18px_rgba(250,204,21,0.65)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-300/50 focus:ring-offset-2",{variants:{variant:{default:"border-amber-300/40 bg-amber-500/20 text-zinc-900 hover:bg-amber-400/30",secondary:"border-zinc-700/40 bg-zinc-900/60 text-amber-100/80 hover:bg-zinc-800/60",destructive:"border-rose-500/50 bg-rose-500/20 text-rose-100 hover:bg-rose-500/30",outline:"border-amber-200/40 bg-transparent text-amber-100/80 hover:border-amber-200/60"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...r})}},51758:(e,t,s)=>{"use strict";s.d(t,{A0:()=>l,BF:()=>o,Hj:()=>c,XI:()=>i,nA:()=>m,nd:()=>d});var a=s(51833),r=s(59693),n=s(81429);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...r})})});i.displayName="Table";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...r})});l.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...r})});o.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});c.displayName="TableRow";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});d.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},57896:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(51833),r=s(59693),n=s(81429);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});i.displayName="Textarea"},81429:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(1887),r=s(49267);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},81695:(e,t,s)=>{"use strict";s.d(t,{CG:()=>o,Fm:()=>u,Qs:()=>h,cj:()=>l,h:()=>m,qp:()=>x});var a=s(51833);s(59693);var r=s(87676),n=s(66846),i=s(81429);function l(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"sheet",...t})}function o(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"sheet-trigger",...t})}function c(e){let{...t}=e;return(0,a.jsx)(r.ZL,{"data-slot":"sheet-portal",...t})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.hJ,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function m(e){let{className:t,children:s,side:l="right",...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(r.UC,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===l&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===l&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===l&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===l&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...o,children:[s,(0,a.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,a.jsx)(n.A,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(r.hE,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.VY,{"data-slot":"sheet-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...s})}},83558:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>o,av:()=>c,j7:()=>l,tU:()=>i});var a=s(51833);s(59693);var r=s(37487),n=s(81429);function i(e){let{className:t,...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...s})}},85994:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>f,gC:()=>p,l6:()=>d,yv:()=>m});var a=s(51833),r=s(59693),n=s(79378),i=s(1372),l=s(20605),o=s(6910),c=s(81429);let d=n.bL;n.YJ;let m=n.WT,u=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(n.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.l9.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=n.PP.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=n.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,position:i="popper",...l}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,a.jsx)(x,{}),(0,a.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=n.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(n.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:r})]})});f.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=n.wv.displayName},99835:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var a=s(51833),r=s(59693),n=s(81429);let i=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...i})});i.displayName="Separator"}},e=>{e.O(0,[3701,3389,7913,8637,8654,2542,9920,6412,728,9959,1413,7358],()=>e(e.s=2446)),_N_E=e.O()}]);
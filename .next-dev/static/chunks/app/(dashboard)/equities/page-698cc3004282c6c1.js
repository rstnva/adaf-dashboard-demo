(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7776],{8716:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>et});var i=s(51833),a=s(59693),r=s(80353),l=s(70933),n=s(45479),c=s(23121),d=s(93508),o=s(33399),u=s(11622),m=s(54840),x=s(54239),h=s(41944);function b(e){let{widgets:t}=e;return(0,i.jsx)(h.x,{storageKey:"equities-sleeve-layout-v1",widgets:t,gridClassName:"lg:grid-cols-2 xl:grid-cols-3",orderAttribute:"data-equities-order"})}var g=s(11492),p=s(82289),f=s(28050),v=s(85623),j=s(49528),N=s(21196);let w={"equities.title":"Sleeve Equities AI","equities.subtitle":"Modelo multi-factor institucional con orquestaci\xf3n ADAF.","equities.flag.off":"Activa NEXT_PUBLIC_FF_EQUITIES_AI_ENABLED para acceder a la sleeve de equities.","equities.permission.denied":"No cuentas con el permiso feature:equities-ai. Solicita acceso al equipo de control.","equities.refresh":"Refrescar","equities.macro.neutral":"Macro: Neutral","equities.macro.riskOn":"Macro: Risk-On","equities.macro.riskOff":"Macro: Risk-Off","equities.overview.lastUpdated":"Actualizado","equities.overview.dryRun":"Modo Dry-Run activo","equities.overview.rebalance":"Rebalanceo","equities.overview.baseCurrency":"Moneda base","equities.overview.risk":"L\xedmites de riesgo","equities.overview.exposure":"Exposici\xf3n bruta","equities.overview.netExposure":"Exposici\xf3n neta","equities.overview.volTarget":"Volatilidad objetivo","equities.actions.generate":"Generar paquete","equities.actions.refreshSignals":"Refrescar se\xf1ales","equities.actions.backtest":"Backtest","equities.actions.viewDetails":"Ver detalle","equities.table.ticker":"Ticker","equities.table.score":"Score","equities.table.conviction":"Convicci\xf3n","equities.table.action":"Acci\xf3n","equities.table.weight":"Peso objetivo (pbs)","equities.table.weightPct":"Peso (%)","equities.table.alpha":"Alpha esperado (pbs)","equities.table.signal":"Se\xf1al","equities.table.dimension":"Dimensi\xf3n","equities.table.value":"Valor","equities.table.valuation":"Valoraci\xf3n","equities.table.growth":"Crecimiento","equities.table.quality":"Calidad","equities.table.dividend":"Dividendo","equities.table.revenue":"Ingresos YoY","equities.table.eps":"EPS YoY","equities.table.fcf":"Margen FCF","equities.table.pe":"P/E","equities.table.fwdPe":"P/E 12m","equities.table.peg":"PEG","equities.table.volume":"Volumen","equities.table.volatility":"Volatilidad 30d","equities.table.flow":"Flujo neto (USD)","equities.table.aum":"AUM (USD)","equities.table.firm":"Firma","equities.table.change":"Cambio","equities.table.date":"Fecha","equities.table.weightBps":"Peso (pbs)","equities.table.convictionChange":"Convicci\xf3n","equities.modal.signal.title":"Detalle de se\xf1al","equities.modal.signal.dimensions":"Dimensiones del modelo","equities.modal.signal.tags":"Tags","equities.modal.backtest.title":"Resultados de backtest","equities.modal.backtest.cagr":"CAGR","equities.modal.backtest.sharpe":"Sharpe","equities.modal.backtest.drawdown":"Drawdown m\xe1ximo","equities.modal.backtest.turnover":"Rotaci\xf3n","equities.modal.backtest.notes":"Notas","equities.modal.backtest.empty":"Ejecuta un backtest para visualizar resultados.","equities.status.loading":"Calculando sleeve...","equities.status.error":"Error al calcular la sleeve.","equities.status.noData":"Sin datos disponibles para los tickers seleccionados.","equities.badge.dryRun":"Dry-Run","equities.badge.live":"Live","equities.badge.pending":"Pendiente","equities.badge.open":"Ventana abierta","equities.badge.closed":"Ventana cerrada","equities.badge.requiresSignature":"Requiere firma h\xfameda","equities.owner.new":"Nueva posici\xf3n","equities.owner.increasing":"Incrementando","equities.owner.decreasing":"Reduciendo","equities.owner.static":"Sin cambios","equities.owner.exited":"Cerrada","equities.owner.weight":"Peso","equities.owner.position":"Posici\xf3n (USD)","equities.owner.shares":"Acciones","equities.owner.reportedAt":"Reportado","equities.kpi.actions":"Acciones sugeridas","equities.widgets.ownership.title":"Institucionales top","equities.widgets.ownership.subtitle":"Cambios recientes en posicionamiento 13F.","equities.widgets.backtest.title":"Backtest r\xe1pido","equities.widgets.backtest.subtitle":"Curva mock para validar sensibilidades del sleeve.","equities.cta.fullBacktest":"Abrir backtest completo","equities.stats.cagr":"CAGR","equities.stats.sharpe":"Sharpe","equities.stats.drawdown":"Drawdown m\xe1x.","equities.stats.turnover":"Rotaci\xf3n","equities.widgets.actions.title":"Acciones multi-factor","equities.widgets.actions.subtitle":"Paquete generado por el motor multi-factor.","equities.widgets.actions.total":"Total sleeve","equities.widgets.actions.totalWeight":"Peso objetivo","equities.widgets.actions.totalAlpha":"Alpha estimado","equities.widgets.actions.totalDryRun":"Dry-run","equities.widgets.signals.title":"Panel de se\xf1ales","equities.widgets.signals.subtitle":"Tablero de convicci\xf3n por ticker.","equities.widgets.fundamentals.title":"Fundamentales y m\xfaltiplos","equities.widgets.fundamentals.subtitle":"Snapshot de valuaci\xf3n y momentum fundamental.","equities.widgets.etfFlows.title":"Flujos primarios ETF","equities.widgets.etfFlows.subtitle":"Entradas y salidas institucionales (5d)."};function q(e){return null==e?"—":"".concat(e.toLocaleString("es-MX")," bps")}function _(e){let{sleeve:t,recommendation:s}=e;if(!t)return(0,i.jsxs)(N.Zp,{children:[(0,i.jsxs)(N.aR,{children:[(0,i.jsx)(N.ZB,{children:w["equities.title"]}),(0,i.jsx)(N.BT,{children:w["equities.subtitle"]})]}),(0,i.jsx)(N.Wu,{children:(0,i.jsx)("div",{className:"flex h-24 items-center justify-center text-sm text-amber-50/70",children:w["equities.status.noData"]})})]});let a=t.riskBudget,r=(0,g.GP)(new Date(t.updatedAt),"PPpp",{locale:p.es});return(0,i.jsxs)(N.Zp,{children:[(0,i.jsxs)(N.aR,{className:"pb-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(N.ZB,{children:t.displayName}),(0,i.jsx)(N.BT,{children:t.description})]}),(0,i.jsx)(o.E,{variant:"outline",className:"border-amber-400/60 text-amber-200",children:t.dryRun?w["equities.badge.dryRun"]:w["equities.badge.live"]})]}),(0,i.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2 text-xs text-amber-200/70",children:[(0,i.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-amber-300/20 px-3 py-1",children:[(0,i.jsx)(f.A,{className:"h-4 w-4"}),w["equities.overview.rebalance"],": ","open"===t.compliance.rebalanceWindow?w["equities.badge.open"]:"closed"===t.compliance.rebalanceWindow?w["equities.badge.closed"]:w["equities.badge.pending"]]}),(0,i.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-amber-300/20 px-3 py-1",children:[(0,i.jsx)(v.A,{className:"h-4 w-4"}),w["equities.overview.lastUpdated"],": ",r]}),t.compliance.requiresWetSignature&&(0,i.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full border border-rose-400/40 px-3 py-1 text-rose-300",children:[(0,i.jsx)(j.A,{className:"h-4 w-4"}),w["equities.badge.requiresSignature"]]})]})]}),(0,i.jsxs)(N.Wu,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,i.jsxs)("div",{className:"rounded-2xl border border-amber-300/10 bg-amber-50/5 p-4",children:[(0,i.jsx)("div",{className:"text-xs uppercase tracking-wide text-amber-100/60",children:w["equities.overview.baseCurrency"]}),(0,i.jsx)("div",{className:"text-2xl font-semibold text-amber-100",children:t.baseCurrency}),(0,i.jsxs)("p",{className:"mt-2 text-xs text-amber-100/60",children:[w["equities.overview.dryRun"],": ",t.dryRun?"S\xed":"No"]})]}),(0,i.jsxs)("div",{className:"rounded-2xl border border-amber-300/10 bg-amber-50/5 p-4",children:[(0,i.jsx)("div",{className:"text-xs uppercase tracking-wide text-amber-100/60",children:w["equities.overview.risk"]}),(0,i.jsxs)("dl",{className:"mt-2 space-y-1 text-sm text-amber-100/80",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("dt",{children:w["equities.overview.exposure"]}),(0,i.jsx)("dd",{children:q(a.maxGrossExposure)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("dt",{children:w["equities.overview.netExposure"]}),(0,i.jsx)("dd",{children:q(a.maxNetExposure)})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("dt",{children:w["equities.overview.volTarget"]}),(0,i.jsxs)("dd",{children:[(100*a.volatilityTarget).toFixed(1),"%"]})]})]})]})]}),s&&(0,i.jsxs)("div",{className:"rounded-2xl border border-amber-300/10 bg-amber-50/5 p-4",children:[(0,i.jsx)("div",{className:"text-xs uppercase tracking-wide text-amber-100/60",children:w["equities.kpi.actions"]}),(0,i.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[s.actions.slice(0,6).map(e=>(0,i.jsxs)(o.E,{variant:"secondary",className:"border border-amber-300/30 bg-amber-200/10",children:[e.ticker," \xb7 ",e.action.toUpperCase()," \xb7 ",e.targetWeightBps,"bps"]},e.ticker)),0===s.actions.length&&(0,i.jsx)("span",{className:"text-xs text-amber-100/60",children:w["equities.status.noData"]})]})]})]})]})}var y=s(80571),A=s(70923),F=s(9262),E=s(70994),S=s(51758);function k(e){let{recommendation:t}=e,[s,r]=(0,a.useState)(null),l=(0,a.useMemo)(()=>{var e;return null!=(e=null==t?void 0:t.actions)?e:[]},[null==t?void 0:t.actions]),n=(0,a.useMemo)(()=>l.reduce((e,t)=>{var s,i;return e.weight+=null!=(s=t.targetWeightBps)?s:0,e.alpha+=null!=(i=t.expectedAlphaBps)?i:0,e},{weight:0,alpha:0}),[l]);return(0,i.jsxs)(N.Zp,{children:[(0,i.jsx)(N.aR,{className:"pb-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(N.ZB,{children:w["equities.widgets.actions.title"]}),(0,i.jsx)(N.BT,{children:w["equities.widgets.actions.subtitle"]})]}),(0,i.jsxs)(o.E,{variant:"outline",className:"border-emerald-400/40 text-emerald-200",children:[(0,i.jsx)(y.A,{className:"mr-2 h-3 w-3"}),l.length," ",w["equities.kpi.actions"]]})]})}),(0,i.jsxs)(N.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"rounded-2xl border border-amber-300/15 bg-amber-100/5 p-4 text-sm text-amber-100/80",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide",children:[(0,i.jsx)(A.A,{className:"h-4 w-4"})," ",w["equities.widgets.actions.total"]]}),(0,i.jsxs)("div",{className:"mt-2 flex flex-wrap gap-3",children:[(0,i.jsxs)("span",{children:[w["equities.widgets.actions.totalWeight"],": ",n.weight.toLocaleString("es-MX")," bps"]}),(0,i.jsxs)("span",{children:[w["equities.widgets.actions.totalAlpha"],": ",n.alpha.toLocaleString("es-MX")," bps"]}),(0,i.jsxs)("span",{children:[w["equities.widgets.actions.totalDryRun"],": ",(null==t?void 0:t.dryRun)?"S\xed":"No"]})]})]}),(0,i.jsxs)(S.XI,{children:[(0,i.jsx)(S.A0,{children:(0,i.jsxs)(S.Hj,{children:[(0,i.jsx)(S.nd,{children:w["equities.table.ticker"]}),(0,i.jsx)(S.nd,{children:w["equities.table.action"]}),(0,i.jsx)(S.nd,{className:"text-right",children:w["equities.table.weight"]}),(0,i.jsx)(S.nd,{className:"text-right",children:w["equities.table.alpha"]}),(0,i.jsx)(S.nd,{className:"text-right"})]})}),(0,i.jsxs)(S.BF,{children:[l.slice(0,8).map(e=>{var t,a,l,n,c,d,m,x;return(0,i.jsxs)(S.Hj,{className:"border-amber-300/10",children:[(0,i.jsx)(S.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.E,{variant:"secondary",className:"bg-amber-900/60 text-amber-100",children:e.ticker}),(0,i.jsx)("span",{className:"text-amber-100/80",children:null!=(n=e.notes)?n:""})]})}),(0,i.jsx)(S.nA,{className:"uppercase tracking-[0.2em] text-amber-100/90",children:e.action}),(0,i.jsx)(S.nA,{className:"text-right text-amber-100/80",children:null==(t=e.targetWeightBps)?void 0:t.toLocaleString("es-MX")}),(0,i.jsx)(S.nA,{className:"text-right text-emerald-300",children:null!=(c=null==(a=e.expectedAlphaBps)?void 0:a.toLocaleString("es-MX"))?c:"—"}),(0,i.jsx)(S.nA,{className:"text-right",children:(0,i.jsxs)(E.lG,{onOpenChange:e=>!e&&r(null),children:[(0,i.jsx)(E.zM,{asChild:!0,children:(0,i.jsxs)(u.$,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"text-xs text-amber-100/70 hover:text-amber-50",children:[w["equities.actions.viewDetails"],(0,i.jsx)(F.A,{className:"ml-1 h-4 w-4"})]})}),(0,i.jsxs)(E.Cf,{className:"max-w-md bg-zinc-950/95 text-amber-100",children:[(0,i.jsxs)(E.c7,{children:[(0,i.jsxs)(E.L3,{children:[w["equities.modal.signal.title"],": ",null==s?void 0:s.ticker]}),(0,i.jsxs)(E.rr,{children:["Acci\xf3n: ",null==s||null==(l=s.action)?void 0:l.toUpperCase()," \xb7 Peso: ",null==s?void 0:s.targetWeightBps," bps"]})]}),(0,i.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Alpha esperado:"})," ",null!=(d=null==s?void 0:s.expectedAlphaBps)?d:"—"," bps"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Stop Loss:"})," ",null!=(m=null==s?void 0:s.stopLossBps)?m:"—"," bps"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Take Profit:"})," ",null!=(x=null==s?void 0:s.takeProfitBps)?x:"—"," bps"]}),(null==s?void 0:s.notes)&&(0,i.jsx)("div",{className:"rounded-xl border border-amber-300/10 bg-amber-50/5 p-3 text-xs text-amber-100/80",children:s.notes})]})]})]})})]},e.ticker)}),0===l.length&&(0,i.jsx)(S.Hj,{children:(0,i.jsx)(S.nA,{colSpan:5,className:"py-6 text-center text-sm text-amber-100/70",children:w["equities.status.noData"]})})]})]})]})]})}var I=s(36477),R=s(43777);function C(e){let{signals:t,macroRegime:s,onRefresh:r,refreshing:l}=e,[n,c]=(0,a.useState)(null),d="risk-on"===s?w["equities.macro.riskOn"]:"risk-off"===s?w["equities.macro.riskOff"]:w["equities.macro.neutral"];return(0,i.jsxs)(N.Zp,{children:[(0,i.jsx)(N.aR,{className:"pb-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(N.ZB,{children:w["equities.widgets.signals.title"]}),(0,i.jsxs)(N.BT,{children:[w["equities.widgets.signals.subtitle"]," \xb7 ",d]})]}),(0,i.jsxs)(u.$,{variant:"ghost",size:"sm",onClick:r,disabled:l,className:"text-xs text-amber-100/70 hover:text-amber-50",children:[(0,i.jsx)(I.A,{className:"mr-2 h-4 w-4"}),w["equities.actions.refreshSignals"]]})]})}),(0,i.jsx)(N.Wu,{children:(0,i.jsxs)(S.XI,{children:[(0,i.jsx)(S.A0,{children:(0,i.jsxs)(S.Hj,{children:[(0,i.jsx)(S.nd,{children:w["equities.table.ticker"]}),(0,i.jsx)(S.nd,{children:w["equities.table.score"]}),(0,i.jsx)(S.nd,{children:w["equities.table.conviction"]}),(0,i.jsx)(S.nd,{children:w["equities.table.signal"]}),(0,i.jsx)(S.nd,{className:"text-right"})]})}),(0,i.jsxs)(S.BF,{children:[t.slice(0,10).map(e=>{var t;return(0,i.jsxs)(S.Hj,{className:"border-amber-300/10",children:[(0,i.jsx)(S.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.E,{variant:"secondary",className:"bg-amber-900/60 text-amber-100",children:e.ticker}),(0,i.jsxs)("span",{className:"text-xs text-amber-100/60",children:[e.horizonDays,"d"]})]})}),(0,i.jsx)(S.nA,{className:"text-amber-100/80",children:e.compositeScore.toFixed(2)}),(0,i.jsx)(S.nA,{children:(0,i.jsx)(o.E,{variant:"outline",className:"uppercase tracking-[0.2em] ".concat((e=>{switch(e){case"high":return"bg-emerald-500/20 text-emerald-200 border-emerald-400/40";case"medium":return"bg-amber-500/20 text-amber-200 border-amber-400/40";default:return"bg-slate-500/20 text-slate-200 border-slate-400/40"}})(e.conviction)),children:e.conviction})}),(0,i.jsx)(S.nA,{className:"text-xs text-amber-100/70",children:e.rationale}),(0,i.jsx)(S.nA,{className:"text-right",children:(0,i.jsxs)(E.lG,{onOpenChange:e=>!e&&c(null),children:[(0,i.jsx)(E.zM,{asChild:!0,children:(0,i.jsx)(u.$,{variant:"ghost",size:"sm",onClick:()=>c(e),className:"text-xs text-amber-100/70 hover:text-amber-50",children:w["equities.actions.viewDetails"]})}),(0,i.jsxs)(E.Cf,{className:"max-w-lg bg-zinc-950/95 text-amber-100",children:[(0,i.jsxs)(E.c7,{children:[(0,i.jsxs)(E.L3,{children:[w["equities.modal.signal.title"],": ",null==n?void 0:n.ticker]}),(0,i.jsxs)(E.rr,{children:[w["equities.table.score"],": ",null==n?void 0:n.compositeScore.toFixed(2)," \xb7"," ",w["equities.table.conviction"],": ",null==n?void 0:n.conviction]})]}),n&&(0,i.jsxs)("div",{className:"space-y-4 text-sm text-amber-100/80",children:[(0,i.jsxs)("div",{className:"rounded-2xl border border-amber-300/10 bg-amber-50/5 p-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs uppercase tracking-wide text-amber-100/60",children:[(0,i.jsx)(R.A,{className:"h-4 w-4"})," ",w["equities.modal.signal.dimensions"]]}),(0,i.jsx)("dl",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:Object.entries(n.dimensions).map(e=>{var t,s;let[a,r]=e;return(0,i.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-amber-300/10 bg-amber-100/5 px-3 py-2",children:[(0,i.jsx)("dt",{className:"capitalize text-amber-100/70",children:a.replace(/Score$/,"")}),(0,i.jsx)("dd",{className:"text-amber-100/90",children:null!=(s=null==r||null==(t=r.toFixed)?void 0:t.call(r,2))?s:"0.00"})]},a)})})]}),(null==(t=n.tags)?void 0:t.length)?(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:n.tags.map(e=>(0,i.jsxs)(o.E,{variant:"secondary",children:["#",e]},e))}):null,(0,i.jsx)("div",{className:"rounded-xl border border-amber-300/10 bg-amber-100/5 p-3 text-xs",children:n.rationale}),(0,i.jsxs)("div",{className:"text-xs text-amber-100/60",children:["Modelo: ",n.modelVersion," \xb7 Generado: ",new Date(n.generatedAt).toLocaleString("es-MX")]})]})]})]})})]},e.id)}),0===t.length&&(0,i.jsx)(S.Hj,{children:(0,i.jsx)(S.nA,{colSpan:5,className:"py-6 text-center text-sm text-amber-100/70",children:w["equities.status.noData"]})})]})]})})]})}function M(e){return null==e?"—":"".concat((100*e).toFixed(1),"%")}function T(e){let{fundamentals:t,prices:s}=e,a=Object.values(t).slice(0,8);return(0,i.jsxs)(N.Zp,{children:[(0,i.jsxs)(N.aR,{className:"pb-4",children:[(0,i.jsx)(N.ZB,{children:w["equities.widgets.fundamentals.title"]}),(0,i.jsx)(N.BT,{children:w["equities.widgets.fundamentals.subtitle"]})]}),(0,i.jsx)(N.Wu,{children:(0,i.jsxs)(S.XI,{children:[(0,i.jsx)(S.A0,{children:(0,i.jsxs)(S.Hj,{children:[(0,i.jsx)(S.nd,{children:w["equities.table.ticker"]}),(0,i.jsx)(S.nd,{children:w["equities.table.pe"]}),(0,i.jsx)(S.nd,{children:w["equities.table.fwdPe"]}),(0,i.jsx)(S.nd,{children:w["equities.table.peg"]}),(0,i.jsx)(S.nd,{children:w["equities.table.dividend"]}),(0,i.jsx)(S.nd,{children:w["equities.table.revenue"]}),(0,i.jsx)(S.nd,{children:w["equities.table.eps"]}),(0,i.jsx)(S.nd,{children:w["equities.table.fcf"]}),(0,i.jsx)(S.nd,{children:w["equities.table.volume"]})]})}),(0,i.jsxs)(S.BF,{children:[a.map(e=>{var t,a,r,l,n,c,d,o,u;let m=s[e.ticker];return(0,i.jsxs)(S.Hj,{className:"border-amber-300/10",children:[(0,i.jsx)(S.nA,{className:"text-amber-100/90",children:e.ticker}),(0,i.jsx)(S.nA,{children:null!=(d=null==(a=e.peRatio)||null==(t=a.toFixed)?void 0:t.call(a,2))?d:"—"}),(0,i.jsx)(S.nA,{children:null!=(o=null==(l=e.forwardPeRatio)||null==(r=l.toFixed)?void 0:r.call(l,2))?o:"—"}),(0,i.jsx)(S.nA,{children:null!=(u=null==(c=e.pegRatio)||null==(n=c.toFixed)?void 0:n.call(c,2))?u:"—"}),(0,i.jsx)(S.nA,{children:M(e.dividendYield)}),(0,i.jsx)(S.nA,{children:M(e.revenueGrowthYoY)}),(0,i.jsx)(S.nA,{children:M(e.epsGrowthYoY)}),(0,i.jsx)(S.nA,{children:M(e.freeCashFlowMargin)}),(0,i.jsx)(S.nA,{children:(null==m?void 0:m.volume)?m.volume.toLocaleString("es-MX"):"—"})]},e.ticker)}),0===a.length&&(0,i.jsx)(S.Hj,{children:(0,i.jsx)(S.nA,{colSpan:9,className:"py-6 text-center text-sm text-amber-100/70",children:w["equities.status.noData"]})})]})]})})]})}function L(e){let{flows:t}=e;return(0,i.jsxs)(N.Zp,{children:[(0,i.jsxs)(N.aR,{className:"pb-4",children:[(0,i.jsx)(N.ZB,{children:w["equities.widgets.etfFlows.title"]}),(0,i.jsx)(N.BT,{children:w["equities.widgets.etfFlows.subtitle"]})]}),(0,i.jsx)(N.Wu,{children:(0,i.jsxs)(S.XI,{children:[(0,i.jsx)(S.A0,{children:(0,i.jsxs)(S.Hj,{children:[(0,i.jsx)(S.nd,{children:w["equities.table.ticker"]}),(0,i.jsx)(S.nd,{children:w["equities.table.flow"]}),(0,i.jsx)(S.nd,{children:w["equities.table.aum"]}),(0,i.jsx)(S.nd,{children:w["equities.table.volume"]})]})}),(0,i.jsxs)(S.BF,{children:[t.slice(0,10).map(e=>{var t,s,a,r,l,n;return(0,i.jsxs)(S.Hj,{className:"border-amber-300/10",children:[(0,i.jsx)(S.nA,{className:"text-amber-100/90",children:e.vehicle}),(0,i.jsx)(S.nA,{className:"text-emerald-300",children:null!=(r=null==(t=e.netFlowUsd)?void 0:t.toLocaleString("es-MX",{style:"currency",currency:"USD"}))?r:"—"}),(0,i.jsx)(S.nA,{children:null!=(l=null==(s=e.aumUsd)?void 0:s.toLocaleString("es-MX",{notation:"compact",maximumFractionDigits:2}))?l:"—"}),(0,i.jsx)(S.nA,{children:null!=(n=null==(a=e.flow5DUsd)?void 0:a.toLocaleString("es-MX",{notation:"compact",maximumFractionDigits:2}))?n:"—"})]},"".concat(e.vehicle,"-").concat(e.ticker))}),0===t.length&&(0,i.jsx)(S.Hj,{children:(0,i.jsx)(S.nA,{colSpan:4,className:"py-6 text-center text-sm text-amber-100/70",children:w["equities.status.noData"]})})]})]})})]})}function B(e){let{ownership:t}=e;return(0,i.jsxs)(N.Zp,{children:[(0,i.jsxs)(N.aR,{className:"pb-4",children:[(0,i.jsx)(N.ZB,{children:w["equities.widgets.ownership.title"]}),(0,i.jsx)(N.BT,{children:w["equities.widgets.ownership.subtitle"]})]}),(0,i.jsx)(N.Wu,{children:(0,i.jsxs)(S.XI,{children:[(0,i.jsx)(S.A0,{children:(0,i.jsxs)(S.Hj,{children:[(0,i.jsx)(S.nd,{children:w["equities.table.firm"]}),(0,i.jsx)(S.nd,{children:w["equities.table.weightPct"]}),(0,i.jsx)(S.nd,{children:w["equities.owner.position"]}),(0,i.jsx)(S.nd,{children:w["equities.table.date"]})]})}),(0,i.jsxs)(S.BF,{children:[t.slice(0,10).map(e=>{var t,s,a,r;return(0,i.jsxs)(S.Hj,{className:"border-amber-300/10",children:[(0,i.jsx)(S.nA,{className:"text-amber-100/90",children:e.filer}),(0,i.jsx)(S.nA,{children:null!==e.weightBps&&void 0!==e.weightBps?(e.weightBps/1e4).toLocaleString("es-MX",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}):"—"}),(0,i.jsx)(S.nA,{className:"increasing"===e.conviction?"text-emerald-300":"decreasing"===e.conviction?"text-rose-300":"text-amber-100/80",children:null!=(s=null==(t=e.positionUsd)?void 0:t.toLocaleString("es-MX",{style:"currency",currency:"USD",maximumFractionDigits:0}))?s:"—"}),(0,i.jsx)(S.nA,{children:(0,i.jsxs)("div",{className:"flex flex-col text-xs text-amber-100/80",children:[(0,i.jsx)("span",{children:e.reportedAt}),(0,i.jsx)("span",{className:"text-amber-100/60",children:(a=e.conviction,null!=(r=w["equities.owner.".concat(a)])?r:a)})]})})]},"".concat(e.ticker,"-").concat(e.reportedAt,"-").concat(e.filer))}),0===t.length&&(0,i.jsx)(S.Hj,{children:(0,i.jsx)(S.nA,{colSpan:4,className:"py-6 text-center text-sm text-amber-100/70",children:w["equities.status.noData"]})})]})]})})]})}function D(e){return null===e||Number.isNaN(e)?"—":e.toLocaleString("es-MX",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2})}function P(e){var t,s,r,l,n;let{result:c,onLaunchBacktest:d}=e,m=(0,a.useMemo)(()=>{if(!c||0===c.equityCurve.length)return"";let e=c.equityCurve.slice(-48),t=e.map(e=>e.value),s=Math.min(...t),i=Math.max(...t)-s||1;return e.map((t,a)=>{let r=a/(e.length-1||1)*100,l=100-(t.value-s)/i*100;return"".concat(0===a?"M":"L").concat(r,",").concat(l)}).join(" ")},[c]);return(0,i.jsxs)(N.Zp,{className:"relative",children:[(0,i.jsxs)(N.aR,{className:"pb-3",children:[(0,i.jsx)(N.ZB,{children:w["equities.widgets.backtest.title"]}),(0,i.jsx)(N.BT,{children:w["equities.widgets.backtest.subtitle"]})]}),(0,i.jsxs)(N.Wu,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-amber-100/70",children:w["equities.stats.cagr"]}),(0,i.jsx)("p",{className:"text-lg font-semibold text-emerald-300",children:D(null!=(s=null==c?void 0:c.cagr)?s:null)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-amber-100/70",children:w["equities.stats.sharpe"]}),(0,i.jsx)("p",{className:"text-lg font-semibold",children:null!=(r=null==c||null==(t=c.sharpe)?void 0:t.toFixed(2))?r:"—"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-amber-100/70",children:w["equities.stats.drawdown"]}),(0,i.jsx)("p",{className:"text-lg font-semibold text-rose-300",children:D(null!=(l=null==c?void 0:c.maxDrawdown)?l:null)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-amber-100/70",children:w["equities.stats.turnover"]}),(0,i.jsx)("p",{className:"text-lg font-semibold",children:D(null!=(n=null==c?void 0:c.turnover)?n:null)})]})]}),(0,i.jsx)("div",{className:"relative h-24 w-40 rounded-sm bg-amber-500/5 p-2",children:m?(0,i.jsxs)("svg",{viewBox:"0 0 100 100",className:"h-full w-full text-emerald-300",children:[(0,i.jsx)("path",{d:"".concat(m," L100,100 L0,100 Z"),fill:"currentColor",className:"opacity-20"}),(0,i.jsx)("path",{d:m,stroke:"currentColor",strokeWidth:1.6,fill:"none"})]}):(0,i.jsx)("div",{className:"flex h-full items-center justify-center text-xs text-amber-100/60",children:w["equities.status.noData"]})})]}),(null==c?void 0:c.notes)&&(0,i.jsx)(o.E,{variant:"secondary",className:"bg-amber-400/10 text-amber-200",children:c.notes})]}),(0,i.jsx)(N.wL,{className:"justify-end border-t border-amber-400/10 pt-4",children:(0,i.jsx)(u.$,{variant:"ghost",size:"sm",onClick:d,disabled:!d,children:w["equities.cta.fullBacktest"]})})]})}var O=s(67356),U=s(65332);let X=s(74238).env.ADAF_RBAC_DEFAULT_ROLE,V="viewer"===X||"user"===X||"admin"===X||"system"===X?X:"admin",z=["feature:summer","feature:echarts","feature:semaforo","feature:blockspace","feature:vaults-lav","feature:alpha-factory","feature:vol-pro","feature:event-alpha","feature:mm-selective","feature:tca","feature:cosmos-executor","feature:liquidity-backstop","feature:equities-ai","feature:news_oracle","admin:control","admin:reports"],W={viewer:[],user:["feature:summer","feature:echarts","feature:blockspace","feature:vaults-lav","feature:alpha-factory","feature:equities-ai","feature:news_oracle"],admin:z,system:z};var H=s(48145);class Y extends Error{constructor(e,t,s,i){super(e),this.name="EquitiesApiError",this.status=t,this.payload=s,this.dryRun=i}}async function G(e){var t,s,i;let a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=await fetch(e,{cache:"no-store",headers:{Accept:"application/json",..."POST"===r.method?{"Content-Type":"application/json"}:{},...null!=(t=r.headers)?t:{}},...r}),n=await l.text();if(n)try{a=JSON.parse(n)}catch(e){console.error("Failed to parse equities API payload",e)}let c=l.headers.get("X-Equities-Dry-Run"),d="boolean"==typeof(null==a?void 0:a.dryRun)?a.dryRun:"true"===c;if(!l.ok)throw new Y(null!=(i=null!=(s=null==a?void 0:a.message)?s:null==a?void 0:a.error)?i:"Equities API request failed (".concat(l.status,")"),l.status,a,d);return{data:null!=a?a:{},dryRun:d}}function Z(e){if(!(null==e?void 0:e.length))return[];let t=new Set;return e.forEach(e=>{"string"==typeof e&&e.trim().length>0&&t.add(e.trim().toUpperCase())}),Array.from(t).sort()}function Q(e){var t,s;let i=(0,H.u)("FF_EQUITIES_AI_ENABLED"),a=(0,H.u)("FF_EQUITIES_AI_DRY_RUN"),r=(t="feature:equities-ai","admin"===V||[...null!=(s=W[V])?s:[]].includes(t)),l=!!((null==e||e)&&i&&r);return{flagEnabled:i,permissionGranted:r,dryRunFallback:a,gateEnabled:l}}async function K(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let i={component:e,action:t,meta:s,timestamp:new Date().toISOString(),userId:"anonymous",sessionId:function(){let e="adaf_session_id",t=sessionStorage.getItem(e);return t||(t="sess_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionStorage.setItem(e,t)),t}()};fetch("/api/metrics/ui/event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch(e=>{console.debug("Telemetry error:",e)})}catch(e){console.debug("Failed to post UI event:",e)}}let $={equitiesMacroChange:e=>K("EquitiesSleeve","macro_change",{macro:e}),equitiesRefreshSignals:e=>K("EquitiesSleeve","refresh_signals",{macro:e}),equitiesRunBacktest:e=>K("EquitiesSleeve","run_backtest",e)},J=["AAPL","MSFT","NVDA","AMZN","GOOGL","META"],ee=[{value:"risk-on",label:w["equities.macro.riskOn"]},{value:"neutral",label:w["equities.macro.neutral"]},{value:"risk-off",label:w["equities.macro.riskOff"]}];function et(){var e,t,s,h,g;let[p,f]=(0,a.useState)("neutral"),v=function(e){var t,s,i,r,l;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,a.useMemo)(()=>{var t;return Z(null!=(t=null==e?void 0:e.tickers)?t:[])},[null==e?void 0:e.tickers]),d=null!=(i=null!=(s=null==e?void 0:e.macroRegime)?s:n.macroRegime)?i:"neutral",o=Q(!1!==n.enabled&&c.length>0);return Object.assign((0,O.I)({queryKey:["equities","recommendations",c,d,null==e||null==(t=e.configuration)?void 0:t.id],queryFn:async()=>{var t;let s={tickers:c,macroRegime:d,configuration:null==e?void 0:e.configuration},{data:i,dryRun:a}=await G("/api/equities/recommendations",{method:"POST",body:JSON.stringify(s)});return{...i,dryRun:null!=(t=i.dryRun)?t:a}},enabled:o.gateEnabled,refetchInterval:null!=(r=n.refetchInterval)?r:12e4,staleTime:null!=(l=n.staleTime)?l:6e4}),{flagEnabled:o.flagEnabled,permissionGranted:o.permissionGranted,dryRunFallback:o.dryRunFallback})}({tickers:J,macroRegime:p,configuration:{id:"equities-ai-core",name:"Sleeve Core Equities AI",mandate:"Core equities sleeve"}}),j=function(e){var t,s,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,a.useMemo)(()=>Z(e),[e]),n=null!=(t=r.macroRegime)?t:"neutral",c=Q(!1!==r.enabled&&l.length>0);return Object.assign((0,O.I)({queryKey:["equities","signals",l,n],queryFn:async()=>{var e;let t=new URLSearchParams({tickers:l.join(","),macroRegime:n}),{data:s,dryRun:i}=await G("/api/equities/signals?".concat(t.toString()));return{...s,dryRun:null!=(e=s.dryRun)?e:i}},enabled:c.gateEnabled,refetchInterval:null!=(s=r.refetchInterval)?s:6e4,staleTime:null!=(i=r.staleTime)?i:3e4}),{flagEnabled:c.flagEnabled,permissionGranted:c.permissionGranted,dryRunFallback:c.dryRunFallback})}(J,{macroRegime:p,enabled:v.flagEnabled&&v.permissionGranted,refetchInterval:12e4}),{mutate:N,data:q,isPending:y}=function(e){let t=Q(!0);return Object.assign((0,U.n)({mutationFn:async e=>{var t;let{data:s,dryRun:i}=await G("/api/equities/backtest",{method:"POST",body:JSON.stringify(e)});return{...s,dryRun:null!=(t=s.dryRun)?t:i}},...void 0}),{flagEnabled:t.flagEnabled,permissionGranted:t.permissionGranted,dryRunFallback:t.dryRunFallback})}(),A=null!=(t=v.data)?t:null,F=v.isLoading||!A&&j.isLoading,E=null!=(s=v.error)?s:j.error,S=(0,a.useMemo)(()=>{if(!A)return null;let e=new Date;return e.setFullYear(e.getFullYear()-1),{sleeveId:A.sleeveState.sleeveId,startDate:e.toISOString(),endDate:new Date().toISOString(),benchmark:"SPY",initialCapital:5e6,transactionCostBps:5,slippageBps:10,includeDrawdown:!0}},[A]),I=null!=(h=null==A?void 0:A.dryRun)?h:v.dryRunFallback,R=null!=(g=null==q?void 0:q.result)?g:null,M=(0,a.useCallback)(()=>{S&&($.equitiesRunBacktest({sleeveId:S.sleeveId,macro:p,dryRun:I,tickers:Array.from(J)}),N(S))},[S,I,p,N]),{refetch:D,isFetching:X,data:V}=j,z=(0,a.useCallback)(()=>{$.equitiesRefreshSignals(p),D()},[p,D]),W=(0,a.useMemo)(()=>{var e,t;return null!=(t=null!=(e=null==V?void 0:V.signals)?e:null==A?void 0:A.signals)?t:[]},[V,A]),H=(0,a.useMemo)(()=>A?[{key:"overview",component:(0,i.jsx)(_,{sleeve:A.sleeveState,recommendation:A.recommendation})},{key:"actions",component:(0,i.jsx)(k,{recommendation:A.recommendation})},{key:"signals",component:(0,i.jsx)(C,{signals:W,macroRegime:p,onRefresh:z,refreshing:X})},{key:"fundamentals",component:(0,i.jsx)(T,{fundamentals:A.fundamentals,prices:A.prices})},{key:"etfFlows",component:(0,i.jsx)(L,{flows:A.etfFlows})},{key:"ownership",component:(0,i.jsx)(B,{ownership:A.ownership})},{key:"backtest",component:(0,i.jsx)(P,{result:R,onLaunchBacktest:M})}]:[],[A,W,p,z,X,R,M]);return v.flagEnabled?v.permissionGranted?E?(0,i.jsx)(m.W,{error:E,onRetry:()=>{v.refetch(),j.refetch()}}):F||!A?(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("header",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm uppercase tracking-[0.3em] text-amber-200",children:[(0,i.jsx)(r.A,{className:"h-4 w-4"})," Equities AI Sleeve"]}),(0,i.jsx)(x.X.CardTitle,{}),(0,i.jsx)(x.X.MetricValue,{})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,i.jsx)("div",{className:"rounded-2xl border border-amber-300/10 bg-amber-50/5 p-6",children:(0,i.jsx)(x.X.Table,{rows:3})},t))})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("header",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-start lg:justify-between",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm uppercase tracking-[0.3em] text-amber-200",children:[(0,i.jsx)(r.A,{className:"h-4 w-4"})," Equities AI Sleeve"]}),(0,i.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:w["equities.title"]}),(0,i.jsx)("p",{className:"text-sm text-amber-100/80 max-w-2xl",children:w["equities.subtitle"]}),(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,i.jsxs)(o.E,{variant:"outline",className:"border-emerald-400/40 text-emerald-200",children:[(0,i.jsx)(n.A,{className:"mr-2 h-3 w-3"})," ",J.length," tickers"]}),(0,i.jsxs)(o.E,{variant:"outline",className:"border-amber-400/40 text-amber-200",children:[(0,i.jsx)(c.A,{className:"mr-2 h-3 w-3"})," Macro: ",null==(e=ee.find(e=>e.value===p))?void 0:e.label]}),(0,i.jsx)(o.E,{variant:"outline",className:I?"border-amber-400/40 text-amber-200":"border-emerald-400/40 text-emerald-200",children:I?w["equities.badge.dryRun"]:w["equities.badge.live"]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,i.jsx)("div",{className:"text-xs text-amber-100/60",children:"Macro regime"}),(0,i.jsx)("div",{className:"flex gap-2",children:ee.map(e=>(0,i.jsx)(u.$,{variant:e.value===p?"default":"outline",size:"sm",onClick:()=>{f(e.value),$.equitiesMacroChange(e.value)},className:e.value===p?"bg-amber-500 text-black":"border-amber-400/40 text-amber-100/80",children:e.label},e.value))}),y&&(0,i.jsxs)("span",{className:"text-xs text-amber-100/60",children:[w["equities.actions.backtest"],"…"]})]})]}),I&&(0,i.jsxs)(d.F,{className:"border-amber-400/40 bg-amber-500/10 text-amber-100",children:[(0,i.jsx)(l.A,{className:"h-5 w-5"}),(0,i.jsx)(d.T,{children:w["equities.overview.dryRun"]})]})]}),(0,i.jsx)(b,{widgets:H})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm uppercase tracking-[0.3em] text-amber-200",children:[(0,i.jsx)(r.A,{className:"h-4 w-4"}),"Equities AI Sleeve"]}),(0,i.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:w["equities.title"]})]}),(0,i.jsxs)(d.F,{className:"border-rose-400/40 bg-rose-500/10 text-rose-100",children:[(0,i.jsx)(l.A,{className:"h-5 w-5"}),(0,i.jsx)(d.T,{children:w["equities.permission.denied"]})]})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm uppercase tracking-[0.3em] text-amber-200",children:[(0,i.jsx)(r.A,{className:"h-4 w-4"}),"Equities AI Sleeve"]}),(0,i.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:w["equities.title"]})]}),(0,i.jsxs)(d.F,{className:"border-amber-400/40 bg-amber-500/10 text-amber-100",children:[(0,i.jsx)(l.A,{className:"h-5 w-5"}),(0,i.jsx)(d.T,{children:w["equities.flag.off"]})]})]})}},11622:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var i=s(51833),a=s(59693),r=s(39728),l=s(49639),n=s(81429);let c=(0,l.F)("relative inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium tracking-tight ring-offset-background transition-all duration-200 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-300/70 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 motion-safe:transform",{variants:{variant:{default:"border border-amber-300/30 bg-gradient-to-r from-amber-500/80 via-amber-400/80 to-yellow-300/80 text-zinc-900 shadow-[0_18px_50px_-25px_rgba(250,204,21,0.65)] hover:from-amber-400/90 hover:to-yellow-200/90 active:scale-95",destructive:"border border-rose-500/50 bg-rose-500/25 text-rose-100 hover:bg-rose-500/35",outline:"border border-amber-200/30 bg-transparent text-amber-100/80 hover:border-amber-200/60 hover:bg-amber-500/10 hover:text-amber-100",secondary:"border border-zinc-700/40 bg-zinc-800/60 text-amber-100 hover:bg-zinc-700/60",ghost:"text-amber-200/80 hover:text-amber-100 hover:bg-amber-500/10",link:"text-amber-200 hover:text-amber-100 underline-offset-4 hover:underline"},size:{default:"h-10 px-5",sm:"h-9 rounded-lg px-4",lg:"h-12 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...o}=e,u=d?r.DX:"button";return(0,i.jsx)(u,{className:(0,n.cn)(c({variant:a,size:l,className:s})),ref:t,...o})});d.displayName="Button"},21196:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>n,wL:()=>u});var i=s(51833),a=s(59693),r=s(81429);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("relative overflow-hidden rounded-3xl border border-amber-300/20 bg-zinc-950/60 text-amber-100 shadow-[0_30px_90px_-40px_rgba(15,23,42,0.95)] backdrop-blur-2xl transition-all duration-300 ease-out motion-safe:transform hover:-translate-y-1 hover:shadow-[0_40px_140px_-35px_rgba(15,23,42,0.95)]",s),...a})});l.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-tight text-amber-100",s),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-amber-50/70",s),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0 text-amber-100/70",s),...a})});u.displayName="CardFooter"},33399:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var i=s(51833);s(59693);var a=s(49639),r=s(81429);let l=(0,a.F)("inline-flex items-center rounded-full border border-amber-300/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-amber-100 shadow-[0_12px_30px_-18px_rgba(250,204,21,0.65)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-300/50 focus:ring-offset-2",{variants:{variant:{default:"border-amber-300/40 bg-amber-500/20 text-zinc-900 hover:bg-amber-400/30",secondary:"border-zinc-700/40 bg-zinc-900/60 text-amber-100/80 hover:bg-zinc-800/60",destructive:"border-rose-500/50 bg-rose-500/20 text-rose-100 hover:bg-rose-500/30",outline:"border-amber-200/40 bg-transparent text-amber-100/80 hover:border-amber-200/60"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:s,...a}=e;return(0,i.jsx)("div",{className:(0,r.cn)(l({variant:s}),t),...a})}},40200:(e,t,s)=>{Promise.resolve().then(s.bind(s,8716))},41944:(e,t,s)=>{"use strict";s.d(t,{x:()=>u});var i=s(51833),a=s(59693),r=s(35429),l=s(85023),n=s(89788);function c(e,t){let s=(Array.isArray(t)?t.filter(e=>"string"==typeof e):[]).filter(t=>e.includes(t)),i=e.filter(e=>!s.includes(e));return[...s,...i]}var d=s(81429);function o(e){let{id:t,children:s,className:a,dataKey:r}=e,{attributes:c,listeners:d,setNodeRef:o,transform:u,transition:m}=(0,l.gl)({id:t}),x={transform:n.Ks.Transform.toString(u),transition:m};return(0,i.jsx)("div",{ref:o,style:x,...c,...d,className:a,"data-widget-key":r,children:s})}function u(e){var t;let{storageKey:s,widgets:n,gridClassName:u,orderAttribute:m}=e,x=(0,r.FR)((0,r.MS)(r.AN)),h=(0,a.useMemo)(()=>n.map(e=>e.key),[n]),b=(0,a.useMemo)(()=>new Map(n.map(e=>[e.key,e])),[n]),g=(0,a.useRef)(null);if(!g.current){let e=function(e){let t=window.localStorage.getItem(e);if(t)try{let e=JSON.parse(t);return Array.isArray(e)?e.filter(e=>"string"==typeof e):void 0}catch(t){console.warn("[layout] Failed to parse stored order for ".concat(e),t);return}}(s);g.current=e?c(h,e):[...h]}let[p,f]=(0,a.useState)(null!=(t=g.current)?t:[...h]),v=(0,a.useMemo)(()=>c(h,p),[h,p]);(0,a.useEffect)(()=>{f(e=>{let t=c(h,e);return t.length===e.length&&t.every((t,s)=>e[s]===t)?e:t})},[h]),(0,a.useEffect)(()=>{v.length&&window.localStorage.setItem(s,JSON.stringify(v))},[v,s]);let j=(0,a.useCallback)(e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&f(e=>{let i=c(h,e),a=i.indexOf(String(t.id)),r=i.indexOf(String(s.id));return -1===a||-1===r?i:(0,l.be)(i,a,r)})},[h]),N=m?{[m]:v.join(",")}:{};return(0,i.jsx)(r.Mp,{sensors:x,collisionDetection:r.fp,onDragEnd:j,children:(0,i.jsx)(l.gB,{items:v,strategy:l._G,children:(0,i.jsx)("div",{className:(0,d.cn)("grid gap-6 grid-cols-1",u),...N,children:v.map(e=>{let t=b.get(e);return t?(0,i.jsx)(o,{id:e,className:t.className,dataKey:e,children:(0,i.jsx)("div",{className:"h-full",children:t.component})},e):null})})})})}},48145:(e,t,s)=>{"use strict";s.d(t,{FEATURE_FLAG_KEYS:()=>a,u:()=>l});var i=s(74238);let a={FF_WSP_ENABLED:"FF_WSP_ENABLED",FF_SUMMER_ENABLED:"FF_SUMMER_ENABLED",FF_BLOCKSPACE_SIM:"FF_BLOCKSPACE_SIM",FF_VAULTS_LAV_SIM:"FF_VAULTS_LAV_SIM",FF_ALPHA_FACTORY_SIM:"FF_ALPHA_FACTORY_SIM",FF_VOL_PRO_SIM:"FF_VOL_PRO_SIM",FF_EVENT_ALPHA_SIM:"FF_EVENT_ALPHA_SIM",FF_MM_SELECTIVE_SIM:"FF_MM_SELECTIVE_SIM",FF_TCA_SIM:"FF_TCA_SIM",FF_COSMOS_EXECUTOR_SIM:"FF_COSMOS_EXECUTOR_SIM",FF_LIQUIDITY_BACKSTOP_SIM:"FF_LIQUIDITY_BACKSTOP_SIM",FF_EQUITIES_AI_ENABLED:"FF_EQUITIES_AI_ENABLED",FF_EQUITIES_AI_DRY_RUN:"FF_EQUITIES_AI_DRY_RUN",FF_NEWS_ORACLE_ENABLED:"FF_NEWS_ORACLE_ENABLED"},r={FF_WSP_ENABLED:"false"!==i.env.NEXT_PUBLIC_FF_WSP_ENABLED,FF_SUMMER_ENABLED:!0,FF_BLOCKSPACE_SIM:"true"===i.env.NEXT_PUBLIC_FF_BLOCKSPACE_SIM,FF_VAULTS_LAV_SIM:"true"===i.env.NEXT_PUBLIC_FF_VAULTS_LAV_SIM,FF_ALPHA_FACTORY_SIM:"true"===i.env.NEXT_PUBLIC_FF_ALPHA_FACTORY_SIM,FF_VOL_PRO_SIM:"true"===i.env.NEXT_PUBLIC_FF_VOL_PRO_SIM,FF_EVENT_ALPHA_SIM:"true"===i.env.NEXT_PUBLIC_FF_EVENT_ALPHA_SIM,FF_MM_SELECTIVE_SIM:"true"===i.env.NEXT_PUBLIC_FF_MM_SELECTIVE_SIM,FF_TCA_SIM:"true"===i.env.NEXT_PUBLIC_FF_TCA_SIM,FF_COSMOS_EXECUTOR_SIM:"true"===i.env.NEXT_PUBLIC_FF_COSMOS_EXECUTOR_SIM,FF_LIQUIDITY_BACKSTOP_SIM:"true"===i.env.NEXT_PUBLIC_FF_LIQUIDITY_BACKSTOP_SIM,FF_EQUITIES_AI_ENABLED:"true"===i.env.NEXT_PUBLIC_FF_EQUITIES_AI_ENABLED,FF_EQUITIES_AI_DRY_RUN:"false"!==i.env.NEXT_PUBLIC_FF_EQUITIES_AI_DRY_RUN,FF_NEWS_ORACLE_ENABLED:"true"===i.env.NEXT_PUBLIC_FF_NEWS_ORACLE_ENABLED};function l(e){return!!r[e]}},51758:(e,t,s)=>{"use strict";s.d(t,{A0:()=>n,BF:()=>c,Hj:()=>d,XI:()=>l,nA:()=>u,nd:()=>o});var i=s(51833),a=s(59693),r=s(81429);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{className:"relative w-full overflow-auto",children:(0,i.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",s),...a})})});l.displayName="Table";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b",s),...a})});n.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",s),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("tfoot",{ref:t,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("tr",{ref:t,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});d.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("th",{ref:t,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});o.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("td",{ref:t,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},54239:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});var i=s(51833),a=s(81429);function r(e){let{height:t="auto",width:s="100%",className:r,rows:n=1,animated:c=!0}=e,d="number"==typeof t?"h-".concat(t):t;return n>1?(0,i.jsx)("div",{className:(0,a.cn)("space-y-2",r),children:Array.from({length:n},(e,t)=>(0,i.jsx)(l,{animated:c},t))}):(0,i.jsx)("div",{className:(0,a.cn)("adaf-skeleton",d,"number"==typeof s?"w-".concat(s):s,c&&"animate-pulse",r),style:"string"==typeof t&&"auto"!==t?{height:t}:void 0})}function l(e){let{animated:t}=e;return(0,i.jsx)("div",{className:(0,a.cn)("adaf-skeleton h-4 rounded",t&&"animate-pulse"),style:{width:"".concat(60+40*Math.random(),"%")}})}let n={CardTitle:()=>(0,i.jsx)(r,{height:"h-6",width:"w-32"}),MetricValue:()=>(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(r,{height:"h-4",width:"w-16"}),(0,i.jsx)(r,{height:"h-8",width:"w-24"}),(0,i.jsx)(r,{height:"h-3",width:"w-20"})]}),ListItem:()=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,i.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,i.jsx)(r,{height:"h-4",width:"w-32"}),(0,i.jsx)(r,{height:"h-3",width:"w-48"})]}),(0,i.jsx)(r,{height:"h-6",width:"w-16"})]}),Table:e=>{let{rows:t=3}=e;return(0,i.jsx)("div",{className:"space-y-2",children:Array.from({length:t},(e,t)=>(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-4 p-2",children:[(0,i.jsx)(r,{height:"h-4"}),(0,i.jsx)(r,{height:"h-4"}),(0,i.jsx)(r,{height:"h-4"}),(0,i.jsx)(r,{height:"h-4"})]},t))})}}},54840:(e,t,s)=>{"use strict";s.d(t,{W:()=>u});var i=s(51833),a=s(11622),r=s(53199),l=s(14357),n=s(70933),c=s(37114),d=s(84312),o=s(81429);function u(e){let{title:t,message:s,error:u,onRetry:m,onViewMore:x,variant:h="default",className:b}=e,g=()=>{switch(h){case"connection":return(0,i.jsx)(r.A,{className:"h-8 w-8 text-red-500"});case"critical":return(0,i.jsx)(l.A,{className:"h-8 w-8 text-red-600"});case"minimal":return(0,i.jsx)(n.A,{className:"h-5 w-5 text-red-500"});default:return(0,i.jsx)(n.A,{className:"h-8 w-8 text-red-500"})}},p=()=>{if(s)return s;if(null==u?void 0:u.message)return u.message;switch(h){case"connection":return"Unable to connect to the server. Please check your connection.";case"critical":return"A critical error occurred. Please contact support.";default:return"Something went wrong. Please try again."}};return"minimal"===h?(0,i.jsxs)("div",{className:(0,o.cn)("flex items-center gap-2 text-red-600",b),children:[g(),(0,i.jsx)("span",{className:"text-sm",children:p()}),m&&(0,i.jsx)(a.$,{variant:"ghost",size:"sm",onClick:m,children:(0,i.jsx)(c.A,{className:"h-4 w-4"})})]}):(0,i.jsx)("div",{className:(0,o.cn)("text-center py-8",b),children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[g(),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-red-700",children:(()=>{if(t)return t;switch(h){case"connection":return"Connection Error";case"critical":return"Critical Error";case"minimal":return"Error";default:return"Failed to Load Data"}})()}),(0,i.jsx)("p",{className:"text-sm text-red-600 max-w-sm mx-auto",children:p()})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,i.jsxs)(a.$,{variant:"outline",size:"sm",onClick:m,children:[(0,i.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Retry"]}),x&&(0,i.jsxs)(a.$,{variant:"ghost",size:"sm",onClick:x,children:[(0,i.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]})})}},70994:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>x,L3:()=>h,c7:()=>m,lG:()=>n,rr:()=>b,zM:()=>c});var i=s(51833);s(59693);var a=s(87676),r=s(66846),l=s(81429);function n(e){let{...t}=e;return(0,i.jsx)(a.bL,{"data-slot":"dialog",...t})}function c(e){let{...t}=e;return(0,i.jsx)(a.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,i.jsx)(a.ZL,{"data-slot":"dialog-portal",...t})}function o(e){let{className:t,...s}=e;return(0,i.jsx)(a.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function u(e){let{className:t,children:s,showCloseButton:n=!0,...c}=e;return(0,i.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,i.jsx)(o,{}),(0,i.jsxs)(a.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...c,children:[s,n&&(0,i.jsxs)(a.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,i.jsx)(r.A,{}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...s}=e;return(0,i.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function x(e){let{className:t,...s}=e;return(0,i.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function h(e){let{className:t,...s}=e;return(0,i.jsx)(a.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...s})}function b(e){let{className:t,...s}=e;return(0,i.jsx)(a.VY,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...s})}},81429:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var i=s(1887),a=s(49267);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,i.$)(t))}},93508:(e,t,s)=>{"use strict";s.d(t,{F:()=>c,T:()=>d});var i=s(51833),a=s(59693),r=s(49639),l=s(81429);let n=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,...r}=e;return(0,i.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(n({variant:a}),s),...r})});c.displayName="Alert";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",s),...a})});d.displayName="AlertDescription"}},e=>{e.O(0,[3701,6333,3060,3389,7913,8654,5554,9739,9959,1413,7358],()=>e(e.s=40200)),_N_E=e.O()}]);